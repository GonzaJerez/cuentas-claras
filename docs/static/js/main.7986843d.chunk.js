(this["webpackJsonpmi-patrimonio"]=this["webpackJsonpmi-patrimonio"]||[]).push([[0],{209:function(e,t,a){},210:function(e,t,a){"use strict";a.r(t);var n=a(36),c=a.n(n),r=a(10),o=a(11),s=a(4),i=a(28),u=a(23),l=a(21),d=a(39),b=a.n(d),j=a(1),m=a.n(j),p=a(2),v=a(19),h=a.n(v),O=a(17),f=a(82),x=a(85),g=Object(f.a)({apiKey:"AIzaSyBX0u1mqveILXYZTpAk7IYYZ1LpETpP-XQ",authDomain:"cuentas-claras-react.firebaseapp.com",projectId:"cuentas-claras-react",storageBucket:"cuentas-claras-react.appspot.com",messagingSenderId:"668234537938",appId:"1:668234537938:web:1e1d45c820953a6fd3860b",measurementId:"G-GZG5TZLLN9"}),C=(Object(x.a)(g),Object(O.f)()),N=new i.a,y="[Movimientos] Nuevo Ingreso",S="[Movimientos] Nuevo Gasto",_="[Movimientos] Nueva Transferencia",k="[Movimientos] Insertar Movimiento Activo",A="[Movimientos] Eliminar Movimiento Activo",w="[Movimientos] Actualizar Movimiento",F="[Movimientos] Eliminar Movimientos",P="[Movimientos] Nueva Deuda",E="[Movimientos] Nuevo Prestamo",D="[Movimientos] Editar Nombre Categoria",I="[Movimientos] Limpiar Movimientos",M="[Movimientos] Cargar Movimientos",T="[Movimientos] Start Loading Movs",L="[Movimientos] Finish Loading Movs",V="[Modal] Open Modal",U="[Modal] Close Modal",R="[Cuentas] Agregar Cuenta",z="[Cuentas] Eliminar Cuenta",G="[Cuentas] Editar Cuenta",B="[Cuentas] Agregar Subcuenta",H="[Cuentas] Eliminar Subcuenta",$="[Cuentas] Editar Subcuenta",q="[Cuentas] Abrir Modo Edicion",Q="[Cuentas] Cerrar Modo Edicion",X="[Cuentas] Insertar cuenta activa",Y="[Cuentas] Eliminar cuenta activa",Z="[Cuentas] Limpiar Cuentas",J="[Cuentas] Cargar Cuentas",K="[Categorias] Agregar Categoria",W="[Categorias] Eliminar Categoria",ee="[Categorias] Editar Categoria",te="[Categorias] Abrir Modo Edicion",ae="[Categorias] Cerrar Modo Edicion",ne="[Categorias] Insertar Categoria activa",ce="[Categorias] Eliminar Categoria activa",re="[Categorias] Limpiar Categorias",oe="[Categorias] Cargar Categorias",se="[Valores] Actualizar Valores",ie="[auth] Login",ue="[auth] Logout",le=a(8),de=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.e)(Object(O.b)(C,"".concat(t,"/app/categorias")));case 2:return a=e.sent,n=[],a.forEach((function(e){n.push(Object(le.a)(Object(le.a)({},e.data()),{},{id:e.id}))})),n.sort((function(e,t){return e.nombre>t.nombre?1:-1})),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=[{nombre:"Materiales de cocina",tipo:"gasto",sector:"hogar"},{nombre:"Comida",tipo:"gasto",sector:"gastos varios"},{nombre:"Sueldo",tipo:"ingreso",sector:"ingresos varios"},{nombre:"Ventas",tipo:"ingreso",sector:"ingresos varios"},{nombre:"Luz",tipo:"gasto",sector:"servicios"},{nombre:"Gas",tipo:"gasto",sector:"servicios"},{nombre:"Netflix",tipo:"gasto",sector:"streaming"},{nombre:"Aporte inicial",tipo:"ingreso",sector:"Aporte inicial"},{nombre:"Intereses",tipo:"ingreso",sector:"Intereses"},{nombre:"Perdida",tipo:"gasto",sector:"Perdida"}],je=function(e){return{type:oe,payload:e}},me=function(e){return function(){var t=Object(p.a)(m.a.mark((function t(a,n){var c,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c=n().auth.uid,t.next=4,Object(O.a)(Object(O.b)(C,"".concat(c,"/app/categorias")),e);case 4:r=t.sent,a(pe(Object(le.a)({id:r.id},e))),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}()},pe=function(e){return{type:K,payload:e}},ve=function(e){return{type:ee,payload:e}},he=function(){return{type:ae}},Oe=function(e){return{type:W,payload:e}},fe=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.e)(Object(O.b)(C,"".concat(t,"/app/cuentas")));case 2:return a=e.sent,n=[],a.forEach((function(e){n.push(Object(le.a)(Object(le.a)({},e.data()),{},{id:e.id}))})),n.sort((function(e,t){return e.nombre>t.nombre?1:-1})),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=[{nombre:"ARS",subcuentas:["Efectivo","Banco HSBC","Mercado Pago"]},{nombre:"USD",subcuentas:["Efectivo","Banco HSBC","Plazo Fijo"]},{nombre:"BTC",subcuentas:["Binance","Decrypto"]},{nombre:"ETH",subcuentas:["Binance","Decrypto"]},{nombre:"Activos",subcuentas:["Auto","Moto","Casa","Terreno","Bici","NFTs"]},{nombre:"Otras criptomonedas",subcuentas:["Ethereum","Cardano"]}],ge=function(e){return{type:J,payload:e}},Ce=function(e){return function(){var t=Object(p.a)(m.a.mark((function t(a,n){var c,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c=n().auth.uid,t.next=4,Object(O.a)(Object(O.b)(C,"".concat(c,"/app/cuentas")),e);case 4:r=t.sent,a(Ne(Object(le.a)({id:r.id},e))),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}()},Ne=function(e){return{type:R,payload:e}},ye=function(e){return console.log(e),function(){var t=Object(p.a)(m.a.mark((function t(a,n){var c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c=n().auth.uid,t.next=4,Object(O.g)(Object(O.d)(C,"".concat(c,"/app/cuentas/").concat(e.id)),e);case 4:a(Se(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,a){return t.apply(this,arguments)}}()},Se=function(e){return{type:B,payload:e}},_e=function(e){return{type:G,payload:e}},ke=function(e){return{type:$,payload:e}},Ae=function(){return{type:Q}},we=function(e){return{type:z,payload:e}},Fe=function(e){return{type:H,payload:e}},Pe=function(e){return{type:X,payload:e}},Ee=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.e)(Object(O.b)(C,"".concat(t,"/app/movimientos")));case 2:return a=e.sent,n=[],a.forEach((function(e){n.push(Object(le.a)(Object(le.a)({},e.data()),{},{id:e.id,fecha:new Date(e.data().fecha)}))})),n.sort((function(e,t){return e.fecha>t.fecha?-1:1})),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(e,t){return function(){var a=Object(p.a)(m.a.mark((function a(n,c){var r,o;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=c().auth.uid,a.prev=1,a.next=4,Object(O.a)(Object(O.b)(C,"".concat(r,"/app/movimientos")),e);case 4:o=a.sent,"nuevoIngreso"===t&&n(Ie(Object(le.a)(Object(le.a)({id:o.id},e),{},{fecha:new Date(e.fecha)}))),"nuevoGasto"===t&&n(Me(Object(le.a)(Object(le.a)({id:o.id},e),{},{fecha:new Date(e.fecha)}))),"nuevaTransferencia"===t&&n(Te(Object(le.a)(Object(le.a)({id:o.id},e),{},{fecha:new Date(e.fecha)}))),"nuevoPrestamo"===t&&n(Ve(Object(le.a)(Object(le.a)({id:o.id},e),{},{fecha:new Date(e.fecha)}))),"nuevaDeuda"===t&&n(Le(Object(le.a)(Object(le.a)({id:o.id},e),{},{fecha:new Date(e.fecha)}))),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(1),console.log(a.t0);case 15:case"end":return a.stop()}}),a,null,[[1,12]])})));return function(e,t){return a.apply(this,arguments)}}()},Ie=function(e){return{type:y,payload:e}},Me=function(e){return{type:S,payload:e}},Te=function(e){return{type:_,payload:e}},Le=function(e){return{type:P,payload:e}},Ve=function(e){return{type:E,payload:e}},Ue=function(e){return{type:k,payload:e}},Re=function(e){return{type:M,payload:e}},ze=function(e){return function(){var t=Object(p.a)(m.a.mark((function t(a,n){var c,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n().auth.uid,delete(r=Object(le.a)({},e)).id,t.next=5,Object(O.g)(Object(O.d)(C,"".concat(c,"/app/movimientos/").concat(e.id)),r);case 5:a(Ge(Object(le.a)(Object(le.a)({},e),{},{fecha:new Date(e.fecha)})));case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},Ge=function(e){return{type:w,payload:e}},Be=function(e){return function(){var t=Object(p.a)(m.a.mark((function t(a,n){var c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n().auth.uid,t.next=3,Object(O.c)(Object(O.d)(C,"".concat(c,"/app/movimientos/").concat(e)));case 3:a(He(e));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},He=function(e){return{type:F,payload:e}},$e=function(){return{type:T}},qe=function(){return{type:L}},Qe=function(e,t){return{type:ie,payload:{uid:e,userName:t}}},Xe=function(){return{type:ue}},Ye=a(7),Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(s.useState)(e),a=Object(o.a)(t,2),n=a[0],c=a[1],r=function(e){c(Object(le.a)(Object(le.a)({},n),{},Object(Ye.a)({},e.target.name,e.target.value)))},i=function(e){c(Object(le.a)(Object(le.a)({},n),{},{fecha:e}))},u=function(e){c(Object(le.a)(Object(le.a)({},n),{},{from:Object(le.a)(Object(le.a)({},n.from),{},Object(Ye.a)({},e.target.name,e.target.value))}))},l=function(e){c(Object(le.a)(Object(le.a)({},n),{},{to:Object(le.a)(Object(le.a)({},n.to),{},Object(Ye.a)({},e.target.name,e.target.value))}))};return[n,r,i,u,l]},Je=a(0),Ke=function(e){var t=e.handleChangeScreen,a=Object(r.b)(),n=Object(s.useState)(!1),c=Object(o.a)(n,2),u=c[0],l=c[1],d=Ze({email:"",pass:""}),j=Object(o.a)(d,2),v=j[0],O=j[1],f=function(){return!!b.a.isEmail(v.email1.trim())||(l("Email invalido"),!1)};return Object(Je.jsxs)("div",{className:"auth__container flip-scale-up-ver",children:[Object(Je.jsx)("div",{className:"img-user",children:Object(Je.jsx)("i",{className:"bi bi-person"})}),Object(Je.jsx)("h1",{children:"Cuentas claras"}),u&&Object(Je.jsx)("div",{className:"form__error",children:Object(Je.jsx)("p",{className:"msg-error",children:u})}),Object(Je.jsxs)("form",{onSubmit:function(e){var t,n;e.preventDefault(),f&&a((t=v.email,n=v.pass,function(){var e=Object(p.a)(m.a.mark((function e(a){var c,r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=Object(i.c)(),e.next=4,Object(i.e)(c,t,n);case 4:r=e.sent,o=r.user,a(Qe(o.uid,o.displayName)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),"auth/wrong-password"===e.t0.code&&h.a.fire("Contrase\xf1a incorrecta","Usuario y contrase\xf1a no coinciden","error"),"auth/user-not-found"===e.t0.code&&h.a.fire("Email incorrecto","Usuario no encontrado","error");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(Je.jsxs)("div",{className:"form-floating mb-3",children:[Object(Je.jsx)("input",{name:"email",value:v.email,onChange:O,type:"email",className:"form-control",id:"floatingInput",placeholder:"Email usuario"}),Object(Je.jsx)("label",{htmlFor:"floatingInput",children:"Email usuario"})]}),Object(Je.jsxs)("div",{className:"form-floating",children:[Object(Je.jsx)("input",{name:"pass",value:v.pass,onChange:O,type:"password",className:"form-control",id:"floatingPassword",placeholder:"Password"}),Object(Je.jsx)("label",{htmlFor:"floatingPassword",children:"Password"})]}),Object(Je.jsx)("button",{type:"submit",className:"btn submit",children:"Ingresar"}),Object(Je.jsxs)("div",{className:"auth__social-networks",children:[Object(Je.jsx)("p",{children:"Ingresar con Google"}),Object(Je.jsxs)("div",{className:"google-btn",onClick:function(e){e.preventDefault(),a(function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,c,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(i.c)(),e.next=3,Object(i.f)(n,N);case 3:c=e.sent,r=c.user,t(Qe(r.uid,r.displayName));case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},children:[Object(Je.jsx)("div",{className:"google-icon-wrapper",children:Object(Je.jsx)("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"google button"})}),Object(Je.jsx)("p",{className:"btn-text",children:"Sign in with google"})]})]}),Object(Je.jsx)("button",{className:"btn change",onClick:t,children:"\xbfNo est\xe1s registrado? Registrate ahora"})]})]})},We=function(e){var t=e.handleChangeScreen,a=Object(s.useState)(!1),n=Object(o.a)(a,2),c=n[0],u=n[1],l=Object(r.b)(),d=Ze({nombre:"",email1:"",email2:"",pass1:"",pass2:""}),j=Object(o.a)(d,2),v=j[0],O=j[1];return Object(Je.jsxs)("div",{className:"auth__container flip-scale-up-ver",children:[Object(Je.jsx)("div",{className:"img-user",children:Object(Je.jsx)("i",{className:"bi bi-person"})}),Object(Je.jsx)("h1",{children:"Cuentas claras"}),c&&Object(Je.jsx)("div",{className:"form__error",children:Object(Je.jsx)("p",{className:"msg-error",children:c})}),Object(Je.jsxs)("form",{onSubmit:function(e){var t,a,n;e.preventDefault(),(v.nombre.trim().length<3||!b.a.isAlpha(v.nombre.trim(),["es-ES"])?(u("Nombre invalido"),0):b.a.isEmail(v.email1.trim())?v.email2.trim()!==v.email1.trim()?(u("Los emails deben ser iguales"),0):b.a.isStrongPassword(v.pass1.trim(),{minLength:5,minLowercase:1,minUppercase:1,minNumbers:1,minSymbols:0})?v.pass1===v.pass2||(u("Las contrase\xf1as deben ser iguales"),0):(u("La contrase\xf1a debe tener al menos 5 caracteres, mayusculas, minusculas y numeros"),0):(u("Email invalido"),0))&&(l((t=v.nombre,a=v.email1,n=v.pass1,function(){var e=Object(p.a)(m.a.mark((function e(c){var r,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Object(i.c)(),e.next=4,Object(i.b)(r,a,n);case 4:return o=e.sent,s=o.user,e.next=8,Object(i.h)(s,{displayName:t});case 8:c(Qe(s.uid,t)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),"auth/email-already-in-use"===e.t0.code&&h.a.fire("Ups","Ya existe una cuenta con ese mail","error");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())),u(!1))},children:[Object(Je.jsxs)("div",{className:"form-floating mb-3",children:[Object(Je.jsx)("input",{autoComplete:"off",name:"nombre",value:v.nombre,onChange:O,type:"text",className:"form-control",id:"floatingInputName",required:!0,placeholder:"Ingrese su nombre"}),Object(Je.jsx)("label",{htmlFor:"floatingInputName",children:"Ingrese su nombre"})]}),Object(Je.jsxs)("div",{className:"form-floating mb-3",children:[Object(Je.jsx)("input",{autoComplete:"off",name:"email1",value:v.email1,onChange:O,type:"email",className:"form-control",id:"floatingInputEmail1",required:!0,placeholder:"Ingrese su email"}),Object(Je.jsx)("label",{htmlFor:"floatingInputEmail1",children:"Ingrese su email"})]}),Object(Je.jsxs)("div",{className:"form-floating mb-3",children:[Object(Je.jsx)("input",{autoComplete:"off",name:"email2",value:v.email2,onChange:O,type:"email",className:"form-control",id:"floatingInputEmail2",required:!0,placeholder:"Confirmar email"}),Object(Je.jsx)("label",{htmlFor:"floatingInputEmail2",children:"Confirmar email"})]}),Object(Je.jsxs)("div",{className:"form-floating",children:[Object(Je.jsx)("input",{name:"pass1",value:v.pass1,onChange:O,type:"password",className:"form-control",id:"floatingPassword1",required:!0,placeholder:"Password"}),Object(Je.jsx)("label",{htmlFor:"floatingPassword1",children:"Password"})]}),Object(Je.jsxs)("div",{className:"form-floating",children:[Object(Je.jsx)("input",{name:"pass2",value:v.pass2,onChange:O,type:"password",className:"form-control",id:"floatingPassword2",required:!0,placeholder:"Confirmar password"}),Object(Je.jsx)("label",{htmlFor:"floatingPassword2",children:"Confirmar password"})]}),Object(Je.jsx)("button",{type:"submit",className:"btn submit",children:"Registrarse"}),Object(Je.jsx)("button",{className:"btn change",onClick:t,children:"\xbfYa est\xe1s registrado? Ingresa con tu cuenta"})]})]})},et=function(){var e=Object(s.useState)("login"),t=Object(o.a)(e,2),a=t[0],n=t[1],c=function(e){e.preventDefault(),n("login"===a?"register":"login")};return Object(Je.jsxs)(Je.Fragment,{children:[Object(Je.jsx)("img",{className:"img-fondo",src:"https://www.billin.net/blog/wp-content/uploads/2020/09/Libro-mayor-1140x760.jpg",alt:"fondo-contabilidad"}),Object(Je.jsxs)("div",{className:"login__screen",children:["login"===a&&Object(Je.jsx)(Ke,{handleChangeScreen:c}),"register"===a&&Object(Je.jsx)(We,{handleChangeScreen:c})]})]})},tt=function(e){return{type:V,payload:{tipo:e.tipo,modo:e.modo,title:e.title}}},at=function(e){var t=e.botonEditarVisible,a=void 0!==t&&t,n=e.ruta,c=Object(r.b)(),i=Object(s.useState)(!1),u=Object(o.a)(i,2),l=u[0],d=u[1],b=Object(r.c)((function(e){return e.cuentas})).isEditing,j=Object(r.c)((function(e){return e.cats})).isEditing,m=function(e){e.preventDefault(),d(!l)},p=function(e,t){e.preventDefault(),e.stopPropagation(),c(tt({tipo:t||e.target.value,modo:"crear"})),d(!1)},v=function(e){e.preventDefault(),"cuentas"===n&&c(Ae()),"categorias"===n&&c(he())};return Object(Je.jsxs)(Je.Fragment,{children:[Object(Je.jsxs)("div",{className:"boton-editar",children:[a&&!b&&Object(Je.jsx)("button",{className:"btn btn-warning btn-editar",children:Object(Je.jsx)("i",{onClick:function(e){e.preventDefault(),"cuentas"===n&&c({type:q}),"categorias"===n&&c({type:te})},className:"bi bi-pencil"})}),a&&b&&Object(Je.jsx)("button",{className:"btn btn-editar buttons__close",children:Object(Je.jsx)("i",{onClick:v,className:"bi bi-x"})}),a&&j&&Object(Je.jsx)("button",{className:"btn btn-editar buttons__close",children:Object(Je.jsx)("i",{onClick:v,className:"bi bi-x"})})]}),Object(Je.jsxs)("div",{className:"boton-plus",children:[l?Object(Je.jsx)("button",{className:"buttons__close",onClick:m,children:Object(Je.jsx)("i",{className:"bi bi-x"})}):Object(Je.jsx)("button",{className:"buttons__plus",onClick:m,children:"+"}),Object(Je.jsxs)("div",{className:"vista-buttons ".concat(l?"visible":""),children:[Object(Je.jsxs)("button",{onClick:p,value:"ingreso",className:"btn btn-menu",children:["Nuevo ingreso",Object(Je.jsx)("i",{onClick:function(e){e.stopPropagation(),e.target.parentElement.click()},className:"bi bi-graph-up-arrow"})]}),Object(Je.jsxs)("button",{onClick:p,value:"transferencia",className:"btn btn-menu",children:["Transferir entre cuentas",Object(Je.jsx)("i",{onClick:function(e){e.stopPropagation(),e.target.parentElement.click()},className:"bi bi-arrow-left-right"})]}),Object(Je.jsxs)("button",{onClick:p,value:"gasto",className:"btn btn-menu",children:["Nuevo gasto",Object(Je.jsx)("i",{onClick:function(e){e.stopPropagation(),e.target.parentElement.click()},className:"bi bi-graph-down-arrow"})]}),Object(Je.jsxs)("button",{onClick:p,value:"deuda",className:"btn btn-menu",children:["Nueva deuda",Object(Je.jsx)("i",{onClick:function(e){e.stopPropagation(),e.target.parentElement.click()},className:"bi bi-bank"})]}),Object(Je.jsxs)("button",{onClick:p,value:"prestamo",className:"btn btn-menu",children:["Nuevo prestamo",Object(Je.jsx)("i",{onClick:function(e){e.stopPropagation(),e.target.parentElement.click()},className:"bi bi-bank"})]}),Object(Je.jsxs)("button",{onClick:p,value:"deudaACobrar",className:"btn btn-menu",children:["Nueva deuda a cobrar",Object(Je.jsx)("i",{onClick:function(e){e.stopPropagation(),e.target.parentElement.click()},className:"bi bi-percent"})]}),Object(Je.jsxs)("button",{onClick:p,value:"compraActivos",className:"btn btn-menu",children:["Compra de activos",Object(Je.jsx)("i",{onClick:function(e){e.stopPropagation(),e.target.parentElement.click()},className:"bi bi-cart"})]}),Object(Je.jsxs)("button",{onClick:p,value:"ventaActivos",className:"btn btn-menu",children:["Venta de activos",Object(Je.jsx)("i",{onClick:function(e){e.stopPropagation(),e.target.parentElement.click()},className:"bi bi-piggy-bank"})]})]})]})]})},nt=function(e){var t=e.options,a=e.clase,n=e.actualizarState,c=e.state;return Object(Je.jsx)("span",{className:"select__view",children:Object(Je.jsx)("select",{className:a,onChange:n,defaultValue:c,children:t.map((function(e){return Object(Je.jsxs)("option",{value:e,children:[e," "]},e)}))})})},ct=function(e){var t=e.movimientos,a=e.cantMostrada,n=e.cabecera,c=Object(r.b)(),o=Object(r.c)((function(e){return e.movs})).loadingMovs,s=t;return void 0!==a&&(s=t.slice(0,a)),o?Object(Je.jsx)("div",{className:"loading-table-container",children:Object(Je.jsx)("div",{className:"loading-table"})}):Object(Je.jsx)(Je.Fragment,{children:Object(Je.jsxs)("table",{className:"table table-borderless animate__animated animate__fadeIn",children:[Object(Je.jsx)("thead",{children:Object(Je.jsxs)("tr",{children:[Object(Je.jsx)("th",{scope:"col",children:n[0]}),Object(Je.jsx)("th",{scope:"col",children:n[1]}),Object(Je.jsx)("th",{scope:"col",children:n[2]}),Object(Je.jsx)("th",{scope:"col",children:n[3]}),n[4]&&Object(Je.jsx)("th",{scope:"col",children:n[4]}),n[5]&&Object(Je.jsx)("th",{scope:"col",children:n[5]})]})}),Object(Je.jsx)("tbody",{children:s.map((function(e){return Object(Je.jsxs)("tr",{className:"table__movimiento ".concat("saldado"===e.estado?"saldado":"pendiente"),onClick:function(t){return function(e,t){e.stopPropagation(),e.preventDefault(),c(Ue(t)),c(tt({tipo:t.tipo,modo:"solo ver"}))}(t,e)},children:["saldado"!==e.estado?Object(Je.jsxs)("th",{scope:"row",children:["gasto"===e.tipo&&"-",new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:"BTC"===e.cuenta||"ETH"===e.cuenta?6:2}).format(e.cantidadPagada?e.cantidad-e.cantidadPagada:e.cantidad)]}):Object(Je.jsx)("th",{scope:"row",children:"Saldado"}),Object(Je.jsx)("td",{children:e.categoria||("deudaACobrar"===e.tipo?"Deuda a cobrar":e.tipo)}),e.prestador&&Object(Je.jsx)("td",{children:e.prestador}),e.tomador&&Object(Je.jsx)("td",{children:e.tomador}),e.subcuenta?Object(Je.jsxs)("td",{children:[e.subcuenta," (",e.cuenta,")"]}):Object(Je.jsx)("td",{children:e.cuenta}),Object(Je.jsx)("td",{children:new Date(e.fecha).toLocaleDateString()}),(e.prestador||e.tomador)&&Object(Je.jsx)("td",{children:Object(Je.jsxs)("button",{className:"table__btn",children:["saldado"===e.estado?Object(Je.jsx)("i",{className:"bi bi-check2-circle"}):Object(Je.jsx)("i",{className:"bi bi-clock-history"})," "]})}),"saldado"!==e.estado&&"prestamo saldado"!==e.categoria&&Object(Je.jsx)("td",{children:Object(Je.jsx)("button",{className:"table__btn",children:Object(Je.jsx)("i",{className:"bi bi-pencil",onClick:function(t){return function(e,t){e.stopPropagation(),e.preventDefault(),c(Ue(t)),c(tt({tipo:t.tipo,modo:"editar"}))}(t,e)}})})})]},e.id)}))})]})})};ct.defaultProps={cabecera:["Cantidad","Categoria","Cuenta","Fecha"]};var rt=function(){var e=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],t=Object(s.useState)(e[(new Date).getMonth()]),a=Object(o.a)(t,2),n=a[0],c=a[1],i=Object(r.c)((function(e){return e.movs})).movs.filter((function(t){return e[t.fecha.getMonth()]===n})).filter((function(e){return"deuda"!==e.tipo&&"prestamo"!==e.tipo&&"transferencia"!==e.tipo&&"deudaACobrar"!==e.tipo&&"compraActivos"!==e.tipo&&"ventaActivos"!==e.tipo}));return Object(Je.jsxs)(Je.Fragment,{children:[Object(Je.jsx)(u.b,{to:"/",className:"go-back",children:Object(Je.jsx)("i",{className:"bi bi-arrow-left-short"})}),Object(Je.jsxs)("div",{className:"container-view",children:[Object(Je.jsx)(nt,{actualizarState:function(e){c(e.target.value)},options:e,state:n}),Object(Je.jsx)("h1",{className:"movimientos__titulo",children:"Todos los movimientos"}),Object(Je.jsx)(ct,{movimientos:i}),Object(Je.jsx)(at,{})]})]})},ot=function(e){var t=e.categorias,a=e.tableElements;console.log(a);var n=Object(r.b)(),c=Object(r.c)((function(e){return e.cats})).isEditing,o=function(e){var t=0;return a.filter((function(t){return t.categoria===e})).map((function(e){return t+=parseInt(e.cantidad)})),t},s=function(e,t,a,c,r){e.preventDefault(),n(tt({tipo:"editar categorias"})),n({type:ne,payload:{catNombre:t,catCantidad:a,id:c,tipo:r}})};return Object(Je.jsx)("div",{className:"accordion",id:"accordionPanelsStayOpenExample",children:t.map((function(e){return Object(Je.jsxs)("div",{className:"accordion-item",children:[Object(Je.jsx)("h2",{className:"accordion-header",id:"panelsStayOpen-headingOne",children:Object(Je.jsxs)("button",{onClick:function(t){return function(e,t){if(e.classList.contains("accordion-button")){var n=a.filter((function(e){return e.categoria===t})).length;e.classList.toggle("collapsed"),e.parentElement.nextSibling.classList.toggle("show"),e.parentElement.nextSibling.classList.contains("show")?e.parentElement.nextSibling.style.height=4*(n+1)+"rem":e.parentElement.nextSibling.style.height="0rem"}}(t.target,e.nombre)},className:"accordion-button d-flex justify-content-between align-items-center collapsed ".concat(0===o(e.nombre)?"no-use":""),type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseOne","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseOne",children:[e.nombre,c&&Object(Je.jsx)("i",{onClick:function(t){return s(t,e.nombre,o(e.nombre),e.id,e.tipo)},className:"bi bi-pencil"})]})}),Object(Je.jsx)("div",{id:"panelsStayOpen-collapseOne",className:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingOne",children:Object(Je.jsx)("div",{className:"accordion-body",children:Object(Je.jsx)(ct,{movimientos:a.filter((function(t){return t.categoria===e.nombre}))})})})]},e.nombre)}))})},st=function(){var e=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],t=Object(s.useState)(e[(new Date).getMonth()]),a=Object(o.a)(t,2),n=a[0],c=a[1],i=Object(r.b)();Object(s.useEffect)((function(){return function(){i(he())}}),[i]);var u=Object(r.c)((function(e){return e.movs})).movs,l=Object(r.c)((function(e){return e.cats})).categorias,d=u.filter((function(t){return e[new Date(t.fecha).getMonth()]===n})).filter((function(e){return"deuda"!==e.tipo&&"prestamo"!==e.tipo&&"transferencia"!==e.tipo&&"deudaACobrar"!==e.tipo&&"compraActivos"!==e.tipo&&"ventaActivos"!==e.tipo})),b=l.sort((function(e,t){return e.nombre>t.nombre?1:-1}));return Object(Je.jsxs)("div",{className:"container-view",children:[Object(Je.jsx)(nt,{options:e,actualizarState:function(e){c(e.target.value)},state:n}),Object(Je.jsx)("h1",{children:"Categorias"}),Object(Je.jsx)(ot,{categorias:b,tableElements:d}),Object(Je.jsx)(at,{botonEditarVisible:!0,ruta:"categorias"})]})},it=function(e,t,a){var n=["BTC","ETH","USD","XRP","ADA"],c=["ARS","USD","MXN"];return e.reduce((function(e,r){if(0!==r.valor){if(r.nombre===t)return e+(r=r.valor);if(n.includes(t)&&c.includes(r.nombre))return e+(r=r.valor/a.find((function(e){return e.nombre==="".concat(t,"/").concat(r.nombre)})).valor);var o;if(n.includes(r.nombre)&&c.includes(t))return e+(r=r.valor*(null===(o=a.find((function(e){return e.nombre===r.nombre+"/"+t})))||void 0===o?void 0:o.valor))}return e+r.valor}),0)},ut=function(e,t,a){var n=0;return e.filter((function(e){return e.cuenta===a})).filter((function(e){return"ingreso"===e.tipo})).map((function(e){return n+=parseFloat(e.cantidad)})),e.filter((function(e){return e.cuenta===a})).filter((function(e){return"gasto"===e.tipo})).map((function(e){return n-=parseFloat(e.cantidad)})),e.filter((function(e){return e.cuenta===a})).filter((function(e){return"prestamo"===e.tipo})).map((function(e){return n+=parseFloat(e.cantidad)})),e.filter((function(e){return e.cuenta===a})).filter((function(e){return"deudaACobrar"===e.tipo})).map((function(e){return n-=parseFloat(e.cantidad)})),e.filter((function(e){return"transferencia"===e.tipo})).filter((function(e){return e.from.cuenta===a})).map((function(e){return n-=parseFloat(e.cantidad)})),e.filter((function(e){return"transferencia"===e.tipo})).filter((function(e){return e.to.cuenta===a})).map((function(e){return n+=parseFloat(e.cantidad)})),e.filter((function(e){return"compraActivos"===e.tipo})).filter((function(e){return e.from.cuenta===a})).map((function(e){return n-=parseFloat(e.cantidad)})),e.filter((function(e){return"compraActivos"===e.tipo})).filter((function(e){return e.to.cuenta===a})).map((function(e){return n+=parseFloat(e.cantidad)})),e.filter((function(e){return"ventaActivos"===e.tipo})).filter((function(e){return e.from.cuenta===a})).map((function(e){return n-=parseFloat(e.cantidad)})),e.filter((function(e){return"ventaActivos"===e.tipo})).filter((function(e){return e.to.cuenta===a})).map((function(e){return n+=parseFloat(e.cantidad)})),e.filter((function(e){return t.find((function(e){return e.nombre===a})).subcuentas.includes(e.categoria)})).filter((function(e){return"gasto"===e.tipo})).map((function(e){return n+=parseInt(e.cantidad)})),{nombre:a,valor:n}},lt=function(e,t,a){var n={nombre:t,valor:0};return e.filter((function(e){return"compraActivos"===e.tipo&&e.from.cuenta===t&&e.to.subcuenta===a})).map((function(e){return n.valor+=parseInt(e.cantidad)})),e.filter((function(e){return"ventaActivos"===e.tipo&&e.to.cuenta===t&&e.from.subcuenta===a})).map((function(e){return n.valor-=parseInt(e.cantidad)})),e.filter((function(e){return"ingreso"===e.tipo&&"Activos"===e.cuenta&&e.monedaValuacion===t&&e.subcuenta===a})).map((function(e){return n.valor+=parseInt(e.cantidad)})),e.filter((function(e){return"ingreso"===e.tipo&&"Otras criptomonedas"===e.cuenta&&e.monedaValuacion===t&&e.subcuenta===a})).map((function(e){return n.valor+=parseInt(e.cantidad)})),n},dt=function(e,t,a,n){var c=[];return t.find((function(e){return e.nombre===a})).subcuentas.forEach((function(t){var r=[],o="",s=0;e.filter((function(e){return e.cuenta===a&&e.subcuenta===t})).filter((function(e){return"ingreso"===e.tipo})).map((function(e){return s+=parseFloat(e.cantidad)})),e.filter((function(e){return e.cuenta===a&&e.subcuenta===t})).filter((function(e){return"gasto"===e.tipo})).map((function(e){return s-=parseFloat(e.cantidad)})),e.filter((function(e){return e.cuenta===a&&e.subcuenta===t})).filter((function(e){return"prestamo"===e.tipo})).map((function(e){return s+=parseFloat(e.cantidad)})),e.filter((function(e){return e.cuenta===a&&e.subcuenta===t})).filter((function(e){return"deudaACobrar"===e.tipo})).map((function(e){return s-=parseFloat(e.cantidad)})),e.filter((function(e){return e.categoria===t})).filter((function(e){return"gasto"===e.tipo})).map((function(e){return s+=parseFloat(e.cantidad)})),e.filter((function(e){return"transferencia"===e.tipo})).filter((function(e){return e.from.cuenta===a&&e.from.subcuenta===t})).map((function(e){return s-=parseFloat(e.cantidad)})),e.filter((function(e){return"transferencia"===e.tipo})).filter((function(e){return e.to.cuenta===a&&e.to.subcuenta===t})).map((function(e){return s+=parseFloat(e.cantidad)})),e.filter((function(e){return"compraActivos"===e.tipo})).filter((function(e){return e.from.cuenta===a&&e.from.subcuenta===t})).map((function(e){return s-=parseFloat(e.cantidad)})),e.filter((function(e){return"compraActivos"===e.tipo})).filter((function(e){return e.to.cuenta===a&&e.to.subcuenta===t})).map((function(e){return s+=parseFloat(e.cantidad)})),e.filter((function(e){return"ventaActivos"===e.tipo})).filter((function(e){return e.from.cuenta===a&&e.from.subcuenta===t})).map((function(e){return s-=parseFloat(e.cantidad)})),e.filter((function(e){return"ventaActivos"===e.tipo})).filter((function(e){return e.to.cuenta===a&&e.to.subcuenta===t})).map((function(e){return s+=parseFloat(e.cantidad)})),e.filter((function(e){return"compraActivos"===e.tipo&&e.to.subcuenta===t})).map((function(e){return o=e.monedaValuacion})),e.filter((function(e){return"compraActivos"===e.tipo&&e.to.subcuenta===t})).forEach((function(e){r.push({nombre:e.from.cuenta,valor:s}),s=it(r,"USD",n)})),e.filter((function(e){return"ingreso"===e.tipo&&"Activos"===e.cuenta&&e.subcuenta===t})).map((function(e){return o=e.monedaValuacion})),""===o&&(o=a),"Activos"!==a&&"Otras criptomonedas"!==a||(o="USD"),c.push({subcuenta:t,cantidad:s,monedaValuacion:o})})),c},bt=function(e,t,a,n){var c=[],r={nombre:"Activos",valor:[]};return t.forEach((function(a){"Activos"!==a.nombre&&"Otras criptomonedas"!==a.nombre?c.push(ut(e,t,a.nombre)):"Activos"!==a.nombre&&"Otras criptomonedas"!==a.nombre&&r.valor.push(lt(e,a))})),{totalCuentas:it(c,a,n),totalActivos:it(r.valor,a,n)}},jt=function(e,t,a,n){var c,r={nombre:"Activos",subcuentas:[]};null===(c=t.find((function(e){return"Activos"===e.nombre})))||void 0===c||c.subcuentas.map((function(a){var n={nombre:a,valor:[]};return t.filter((function(e){return"Activos"!==e.nombre})).forEach((function(t){n.valor.push(lt(e,t.nombre,a))})),r.subcuentas.push(n)}));var o=0;return r.subcuentas.forEach((function(e){o+=it(e.valor,a,n)})),{cantidadTotalActivos:r,cantidadTotalConvertida:o}},mt=function(e,t,a,n){var c,r={nombre:"Otras criptomonedas",subcuentas:[]};null===(c=t.find((function(e){return"Otras criptomonedas"===e.nombre})))||void 0===c||c.subcuentas.map((function(a){var n={nombre:a,valor:[]};return t.filter((function(e){return"Otras criptomonedas"!==e.nombre})).forEach((function(t){n.valor.push(lt(e,t.nombre,a))})),r.subcuentas.push(n)}));var o=0;return r.subcuentas.forEach((function(e){o+=it(e.valor,a,n)})),{cantidadTotalOtrasCriptomonedas:r,cantidadTotalConvertida:o}},pt=function(e){var t=e.elementos,a=e.isEditing,n=e.nomCuenta,c=Object(r.b)(),i=Object(s.useState)("ARS"),u=Object(o.a)(i,2),l=u[0],d=u[1],b=Object(r.c)((function(e){return e.pares})).pares,j=Object(r.c)((function(e){return e.movs})).movs,m=Object(r.c)((function(e){return e.cuentas})).cuentas,p=function(e){var t=0;return"Activos"===e.monedaValuacion&&jt(j,m,l,b).cantidadTotalActivos.subcuentas.forEach((function(a){a.nombre===e.subcuenta&&(t=it(a.valor,l,b))})),0!==e.cantidad&&(t=it([{nombre:e.monedaValuacion,valor:e.cantidad}],l,b)),t};return Object(Je.jsxs)("div",{className:"list__view",children:[Object(Je.jsx)(nt,{options:["ARS","USD","BTC","ETH"],state:l,actualizarState:function(e){e.preventDefault(),d(e.target.value)}}),Object(Je.jsx)("ul",{className:"list-group",children:t.map((function(e){return Object(Je.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.subcuenta,Object(Je.jsx)("span",{className:"badge bg-secondary bg-".concat(e.cantidad<0?"danger":"").concat(e.cantidad>0?"success":""),children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:"BTC"===l||"ETH"===l?6:2}).format(p(e))}),a&&Object(Je.jsx)("i",{className:"bi bi-pencil",onClick:function(t){return function(e,t,a){e.preventDefault(),c(tt({tipo:"editar subcuentas"})),c(Pe({nomCuenta:n,nomSubcuenta:t,cantidad:a}))}(t,e.subcuenta,e.cantidad)}})]},e.subcuenta)}))})]})},vt=function(){var e=Object(r.c)((function(e){return e.movs})).movs,t=Object(r.c)((function(e){return e.pares})).pares,a=Object(r.c)((function(e){return e.cuentas})),n=a.cuentas,c=a.isEditing,o=Object(r.b)();return Object(Je.jsx)("div",{className:"accordion accordion-list",id:"accordionPanelsStayOpenExample",children:n.map((function(a){return Object(Je.jsxs)("div",{className:"accordion-item",children:[Object(Je.jsx)("h2",{className:"accordion-header",id:"panelsStayOpen-headingOne",children:Object(Je.jsxs)("button",{onClick:function(e){return function(e,t){if(e.classList.contains("accordion-button")){var a=n.find((function(e){return e.nombre===t})).subcuentas.length;e.classList.toggle("collapsed"),e.parentElement.nextSibling.classList.toggle("show"),e.parentElement.nextSibling.classList.contains("show")?e.parentElement.nextSibling.style.height="calc("+55*a+"px + 3rem)":e.parentElement.nextSibling.style.height="0px"}}(e.target,a.nombre)},className:"accordion-button d-flex justify-content-between align-items-center collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseOne","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseOne",children:[a.nombre,Object(Je.jsx)("span",{onClick:function(e){return e.target.parentElement.click()},className:"badge bg-secondary bg-".concat(ut(e,n,a.nombre).valor<0?"danger":"").concat(ut(e,n,a.nombre).valor>0?"success":""),children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:"BTC"===a.nombre||"ETH"===a.nombre?6:2}).format("Activos"===a.nombre?jt(e,n,"USD",t).cantidadTotalConvertida:"Otras criptomonedas"===a.nombre?mt(e,n,"USD",t).cantidadTotalConvertida:ut(e,n,a.nombre).valor)}),c&&Object(Je.jsx)("i",{onClick:function(t){return function(e,t,a){e.preventDefault(),o(tt({tipo:"editar cuentas"})),o(Pe(Object(le.a)(Object(le.a)({},t),{},{cantidad:a})))}(t,a,ut(e,n,a.nombre).valor)},className:"bi bi-pencil"})]})}),Object(Je.jsx)("div",{id:"panelsStayOpen-collapseOne",className:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingOne",children:Object(Je.jsx)("div",{className:"accordion-body",children:Object(Je.jsx)(pt,{elementos:dt(e,n,a.nombre,t),isEditing:c,nomCuenta:a.nombre})})})]},a.nombre)}))})},ht=function(){var e=Object(r.c)((function(e){return e.movs})).movs,t=Object(r.c)((function(e){return e.cuentas})).cuentas,a=Object(r.b)();Object(s.useEffect)((function(){return function(){a(Ae())}}),[a]);var n=e.filter((function(e){return"deuda"!==e.tipo})),c=t.map((function(e){return e.nombre}));return Object(Je.jsxs)("div",{className:"container-view",children:[Object(Je.jsx)("h1",{children:"Cuentas"}),Object(Je.jsx)(vt,{nombreCuentas:c,tableElements:n}),Object(Je.jsx)(at,{botonEditarVisible:!0,ruta:"cuentas"})]})},Ot=function(){return Object(Je.jsxs)("div",{children:[Object(Je.jsx)("h1",{children:"Pagina en construcci\xf3n..."}),Object(Je.jsx)("div",{className:"page-in-construction",children:Object(Je.jsx)("lottie-player",{className:"animacion",src:"https://assets8.lottiefiles.com/packages/lf20_8uHQ7s.json",background:"transparent",speed:"1",style:{maxWidth:"300px",maxHeight:"300px"},loop:!0,autoplay:!0})})]})},ft=function(){var e=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],t=Object(s.useState)(e[(new Date).getMonth()]),a=Object(o.a)(t,2),n=a[0],c=a[1],i=Object(r.c)((function(e){return e.movs})).movs,u=Object(r.c)((function(e){return e.cats})).categorias,l=i.filter((function(t){return e[t.fecha.getMonth()]===n})).filter((function(e){return"gasto"===e.tipo})),d=u.filter((function(e){return"gasto"===e.tipo})).sort((function(e,t){return e.nombre>t.nombre?1:-1}));return Object(Je.jsxs)("div",{className:"container-view",children:[Object(Je.jsx)(nt,{options:e,actualizarState:function(e){c(e.target.value)},state:n}),Object(Je.jsx)("h1",{children:"Gastos"}),Object(Je.jsx)(ot,{categorias:d,tableElements:l}),Object(Je.jsx)(at,{})]})},xt=function(e){var t=e.movimientos;return Object(Je.jsxs)("section",{className:"tabla-general",children:[Object(Je.jsx)("h3",{children:"Ultimos movimientos"}),Object(Je.jsx)(ct,{movimientos:t,cantMostrada:5})]})},gt=function(e){var t=e.cuentas,a=Object(r.c)((function(e){return e.movs})).movs,n=Object(r.c)((function(e){return e.pares})).pares;return Object(Je.jsx)("div",{children:t.map((function(e){return ut(a,t,e.nombre).valor>0&&Object(Je.jsxs)("p",{className:"total-por-cuentas",children:[e.nombre," ",Object(Je.jsxs)("b",{children:[new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:"BTC"===e.nombre||"ETH"===e.nombre?6:2}).format("Activos"===e.nombre?jt(a,t,"USD",n).cantidadTotalConvertida:"Otras criptomonedas"===e.nombre?mt(a,t,"USD",n).cantidadTotalConvertida:ut(a,t,e.nombre).valor),("Activos"===e.nombre||"Otras criptomonedas"===e.nombre)&&" usd"]})]},e.nombre)}))})},Ct=function(){var e=Object(s.useState)("ARS"),t=Object(o.a)(e,2),a=t[0],n=t[1],c=Object(r.c)((function(e){return e.pares})),i=c.pares,u=Object(r.c)((function(e){return e.movs})),l=u.loadingMovs,d=Object(r.c)((function(e){return e.movs})),b=d.movs,j=Object(r.c)((function(e){return e.cuentas})),m=j.cuentas;return l?Object(Je.jsxs)("div",{className:"loading-container",children:[Object(Je.jsx)("div",{className:"loading-patrimonio-view"}),Object(Je.jsx)("div",{className:"loading-cuentas-home"})]}):Object(Je.jsxs)("div",{className:"patrimonio__view animate__animated animate__fadeIn",children:[Object(Je.jsx)(nt,{options:["ARS","USD","BTC","ETH"],clase:"upperCase",actualizarState:function(e){n(e.target.value)}}),Object(Je.jsxs)("div",{className:"patrimonio__cantidad",children:[Object(Je.jsxs)("div",{className:"patrimonio__principal",children:[Object(Je.jsxs)("small",{children:[a," "]}),Object(Je.jsxs)("h1",{children:[" ",new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:"BTC"===a||"ETH"===a?6:2}).format(bt(b,m,a,i).totalCuentas+jt(b,m,a,i).cantidadTotalConvertida+mt(b,m,a,i).cantidadTotalConvertida)]})]}),Object(Je.jsx)(gt,{cuentas:m})]})]})},Nt=function(){var e=Object(r.c)((function(e){return e.movs})).movs.filter((function(e){return"deuda"!==e.tipo&&"prestamo"!==e.tipo&&"transferencia"!==e.tipo&&"deudaACobrar"!==e.tipo&&"compraActivos"!==e.tipo&&"ventaActivos"!==e.tipo}));return Object(Je.jsxs)("div",{className:"container-view",children:[Object(Je.jsx)(Ct,{}),Object(Je.jsx)(xt,{movimientos:e}),e.length>5&&Object(Je.jsx)(u.b,{to:"/movimientos",element:"",className:"ver-mas",children:"Ver mas movimientos"}),Object(Je.jsx)(at,{})]})},yt=function(){var e=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],t=Object(s.useState)(e[(new Date).getMonth()]),a=Object(o.a)(t,2),n=a[0],c=a[1],i=Object(r.c)((function(e){return e.movs})).movs,u=Object(r.c)((function(e){return e.cats})).categorias,l=i.filter((function(t){return e[t.fecha.getMonth()]===n})).filter((function(e){return"ingreso"===e.tipo})),d=u.filter((function(e){return"ingreso"===e.tipo})).sort((function(e,t){return e.nombre>t.nombre?1:-1}));return Object(Je.jsxs)("div",{className:"container-view",children:[Object(Je.jsx)(nt,{options:e,actualizarState:function(e){c(e.target.value)},state:n}),Object(Je.jsx)("h1",{children:"Ingresos"}),Object(Je.jsx)(ot,{tableElements:l,categorias:d}),Object(Je.jsx)(at,{})]})},St=function(e){var t=e.elementos,a=Object(r.b)();return Object(Je.jsx)("div",{className:"list__view",children:Object(Je.jsxs)("table",{className:"table table-borderless",children:[Object(Je.jsx)("thead",{children:Object(Je.jsxs)("tr",{children:[Object(Je.jsx)("th",{scope:"col",children:"Cantidad"}),Object(Je.jsx)("th",{scope:"col",children:"De"}),Object(Je.jsx)("th",{scope:"col"}),Object(Je.jsx)("th",{scope:"col",children:"A"}),Object(Je.jsx)("th",{scope:"col",children:"Fecha"})]})}),Object(Je.jsx)("tbody",{children:t.map((function(e){return Object(Je.jsxs)("tr",{className:"table__movimiento",onClick:function(t){return function(e,t){e.stopPropagation(),e.preventDefault(),a(Ue(t)),a(tt({tipo:t.tipo,modo:"solo ver"}))}(t,e)},children:[Object(Je.jsx)("th",{scope:"row",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(parseInt(e.cantidad))}),Object(Je.jsxs)("td",{children:[" ",e.from.subcuenta," (",e.from.cuenta,")"]}),Object(Je.jsx)("td",{children:Object(Je.jsx)("i",{className:"bi bi-arrow-right"})}),Object(Je.jsxs)("td",{children:[" ",e.to.subcuenta," (",e.to.cuenta,")"]}),Object(Je.jsx)("td",{children:e.fecha.toLocaleDateString()}),Object(Je.jsx)("td",{children:Object(Je.jsx)("button",{className:"table__btn",children:Object(Je.jsx)("i",{className:"bi bi-pencil",onClick:function(t){return function(e,t){e.stopPropagation(),e.preventDefault(),a(Ue(t)),a(tt({tipo:t.tipo,modo:"editar"}))}(t,e)}})})})]},e.id)}))})]})})},_t=function(e){var t=e.tipo,a=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],n=Object(s.useState)(a[(new Date).getMonth()]),c=Object(o.a)(n,2),i=c[0],u=c[1],l=Object(r.c)((function(e){return e.movs})).movs.filter((function(e){return a[e.fecha.getMonth()]===i})).filter((function(e){return e.tipo===t}));return Object(Je.jsxs)("div",{className:"container-view tabla-general",children:[Object(Je.jsx)(nt,{options:a,actualizarState:function(e){u(e.target.value)},state:i}),"transferencia"===t&&Object(Je.jsx)("h1",{children:"Transferencias"}),"compraActivos"===t&&Object(Je.jsx)("h1",{children:"Compras"}),"ventaActivos"===t&&Object(Je.jsx)("h1",{children:"Ventas"}),Object(Je.jsx)(St,{elementos:l}),Object(Je.jsx)(at,{})]})},kt=function(){var e=Object(r.c)((function(e){return e.movs})).movs.filter((function(e){return"deuda"===e.tipo||"prestamo"===e.tipo}));return Object(Je.jsxs)("div",{className:"container-view",children:[Object(Je.jsx)("h1",{children:"Deudas"}),Object(Je.jsx)(ct,{movimientos:e,cabecera:["Cantidad","Motivo","A quien","Cuenta","Fecha","Estado"]}),Object(Je.jsx)(at,{})]})},At=function(){var e=Object(r.c)((function(e){return e.movs})).movs.filter((function(e){return"deudaACobrar"===e.tipo||"prestamoACobrar"===e.tipo}));return Object(Je.jsxs)("div",{className:"container-view",children:[Object(Je.jsx)("h1",{children:"Deudas a cobrar"}),Object(Je.jsx)(ct,{movimientos:e,cabecera:["Cantidad","Motivo","De quien","Cuenta","Fecha","Estado"]}),Object(Je.jsx)(at,{})]})},wt=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://criptoya.com/api/satoshitango/",e.next=3,fetch("https://criptoya.com/api/satoshitango/"+t,{header:{"Content-Type":"application/json"}});case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,c=n.bid,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ft=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.auth})).name;Object(s.useEffect)((function(){var t=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n,c,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wt("dai/ars");case 2:return t=e.sent,e.next=5,wt("btc/usd");case 5:return a=e.sent,e.next=8,wt("btc/ars");case 8:return n=e.sent,e.next=11,wt("eth/ars");case 11:return c=e.sent,e.next=14,wt("eth/usd");case 14:return r=e.sent,e.abrupt("return",[{nombre:"USD/ARS",valor:t},{nombre:"BTC/USD",valor:a},{nombre:"BTC/ARS",valor:n},{nombre:"ETH/ARS",valor:c},{nombre:"ETH/USD",valor:r}]);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t().then((function(t){return e({type:se,payload:t})}))}),[e]);var a=Object(s.useRef)(),n=Object(s.useRef)(),c=function(){a.current.style.transform="translateX(-250px)",n.current.style.zIndex="-1",n.current.style.opacity="0"};return Object(Je.jsxs)("div",{className:"navbar__view",children:[Object(Je.jsxs)("header",{className:"navbar__header",children:[Object(Je.jsx)("button",{onClick:function(){a.current.style.transform="translateX(0px)",n.current.style.zIndex="2",n.current.style.opacity="1"},children:Object(Je.jsx)("i",{className:"bi bi-list"})}),Object(Je.jsx)("h3",{children:"Cuentas claras"})]}),Object(Je.jsxs)("nav",{ref:a,className:"navbar__menu",children:[Object(Je.jsxs)("ul",{children:[Object(Je.jsx)("li",{className:"displayName",children:Object(Je.jsx)("h5",{className:"displayName",children:t})}),Object(Je.jsx)("li",{children:Object(Je.jsxs)(u.c,{to:"/",onClick:c,className:function(e){return e.isActive?"active":""},children:[Object(Je.jsx)("i",{className:"bi bi-house"}),"Home"]})}),Object(Je.jsx)("li",{children:Object(Je.jsxs)(u.c,{to:"/categories",onClick:c,className:function(e){return e.isActive?"active":""},children:[Object(Je.jsx)("i",{className:"bi bi-list-task"}),"Categorias"]})}),Object(Je.jsx)("li",{children:Object(Je.jsxs)(u.c,{to:"/ingresos",onClick:c,className:function(e){return e.isActive?"active":""},children:[Object(Je.jsx)("i",{className:"bi bi-graph-up-arrow"}),"Ingresos"]})}),Object(Je.jsx)("li",{children:Object(Je.jsxs)(u.c,{to:"/gastos",onClick:c,className:function(e){return e.isActive?"active":""},children:[Object(Je.jsx)("i",{className:"bi bi-graph-down-arrow"}),"Gastos"]})}),Object(Je.jsx)("li",{children:Object(Je.jsxs)(u.c,{to:"/deudas",onClick:c,className:function(e){return e.isActive?"active":""},children:[Object(Je.jsx)("i",{className:"bi bi-bank"}),"Deudas"]})}),Object(Je.jsx)("li",{children:Object(Je.jsxs)(u.c,{to:"/deudas-a-cobrar",onClick:c,className:function(e){return e.isActive?"active":""},children:[Object(Je.jsx)("i",{className:"bi bi-percent"}),"Deudas a cobrar"]})}),Object(Je.jsx)("li",{children:Object(Je.jsxs)(u.c,{to:"/transferencias",onClick:c,className:function(e){return e.isActive?"active":""},children:[Object(Je.jsx)("i",{className:"bi bi-arrow-left-right"}),"Transferencias"]})}),Object(Je.jsx)("li",{children:Object(Je.jsxs)(u.c,{to:"/cuentas",onClick:c,className:function(e){return e.isActive?"active":""},children:[Object(Je.jsx)("i",{className:"bi bi-wallet"}),"Cuentas"]})}),Object(Je.jsx)("li",{children:Object(Je.jsxs)(u.c,{to:"/estadisticas",onClick:c,className:function(e){return e.isActive?"active":""},children:[Object(Je.jsx)("i",{className:"bi bi-bar-chart"}),"Estadisticas"]})}),Object(Je.jsx)("li",{children:Object(Je.jsxs)(u.c,{to:"/compras",onClick:c,className:function(e){return e.isActive?"active":""},children:[Object(Je.jsx)("i",{className:"bi bi-cart"}),"Compras"]})}),Object(Je.jsx)("li",{children:Object(Je.jsxs)(u.c,{to:"/ventas",onClick:c,className:function(e){return e.isActive?"active":""},children:[Object(Je.jsx)("i",{className:"bi bi-piggy-bank"}),"Ventas"]})})]}),Object(Je.jsx)("ul",{children:Object(Je.jsx)("li",{children:Object(Je.jsxs)(u.c,{to:"/login",onClick:function(t){t.preventDefault(),e(function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(i.c)(),e.next=3,Object(i.g)(a);case 3:t(Xe()),t({type:I}),t({type:Z}),t({type:re});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},className:"logout",children:[Object(Je.jsx)("i",{className:"bi bi-box-arrow-in-left"}),"Logout"]})})})]}),Object(Je.jsxs)("section",{onClick:c,className:"navbar__principal",children:[Object(Je.jsx)("div",{className:"navbar__modal",ref:n}),Object(Je.jsx)("div",{className:"navbar__vista",children:Object(Je.jsxs)(l.d,{children:[Object(Je.jsx)(l.b,{path:"/",element:Object(Je.jsx)(Nt,{})}),Object(Je.jsx)(l.b,{path:"/categories",element:Object(Je.jsx)(st,{})}),Object(Je.jsx)(l.b,{path:"/ingresos",element:Object(Je.jsx)(yt,{})}),Object(Je.jsx)(l.b,{path:"/gastos",element:Object(Je.jsx)(ft,{})}),Object(Je.jsx)(l.b,{path:"/transferencias",element:Object(Je.jsx)(_t,{tipo:"transferencia"})}),Object(Je.jsx)(l.b,{path:"/estadisticas",element:Object(Je.jsx)(Ot,{})}),Object(Je.jsx)(l.b,{path:"/cuentas",element:Object(Je.jsx)(ht,{})}),Object(Je.jsx)(l.b,{path:"/movimientos",element:Object(Je.jsx)(rt,{})}),Object(Je.jsx)(l.b,{path:"/deudas",element:Object(Je.jsx)(kt,{})}),Object(Je.jsx)(l.b,{path:"/deudas-a-cobrar",element:Object(Je.jsx)(At,{})}),Object(Je.jsx)(l.b,{path:"/compras",element:Object(Je.jsx)(_t,{tipo:"compraActivos"})}),Object(Je.jsx)(l.b,{path:"/ventas",element:Object(Je.jsx)(_t,{tipo:"ventaActivos"})}),Object(Je.jsx)(l.b,{path:"*",element:Object(Je.jsx)(l.a,{to:"/"})})]})})]})]})},Pt=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.movs})).activeMov,a=t.cantidad,n=t.cantidadPagada,c=t.categoria,o=t.prestador,s=t.cuenta,i=t.fecha,u=t.descripcion,l=t.estado,d=t.cuotas,b=t.cuotasPagadas,j=t.url;return Object(Je.jsxs)("div",{className:"detalle__form",children:[Object(Je.jsx)("h1",{children:"Detalle deuda"}),Object(Je.jsxs)("section",{className:"detalle__section",children:[Object(Je.jsxs)("h4",{children:["Tipo: ",Object(Je.jsx)("span",{children:"Deuda"})]}),Object(Je.jsxs)("h4",{children:["Fecha: ",Object(Je.jsx)("span",{children:i.toLocaleDateString()})]}),Object(Je.jsxs)("h4",{children:["Cantidad total: ",Object(Je.jsxs)("span",{children:["$ ",a]})]}),Object(Je.jsxs)("h4",{children:["Cantidad abonada: ",Object(Je.jsxs)("span",{children:["$ ",n]})]}),Object(Je.jsxs)("h4",{children:["Cantidad restante: ",Object(Je.jsxs)("span",{children:["$ ",a-n]})]}),Object(Je.jsxs)("h4",{children:["Prestador: ",Object(Je.jsx)("span",{children:o})]}),Object(Je.jsxs)("h4",{children:["Cuenta: ",Object(Je.jsx)("span",{children:s})]}),Object(Je.jsxs)("h4",{children:["Motivo: ",Object(Je.jsx)("span",{children:c})]}),Object(Je.jsxs)("h4",{children:["Cuotas abonadas: ",Object(Je.jsxs)("span",{children:[" ",b,"/",d]})]}),j&&Object(Je.jsxs)("h4",{children:["Comprobante: ",Object(Je.jsx)("a",{href:j,target:"_blank",rel:"noreferrer",children:"Ver comprobante"})]}),Object(Je.jsxs)("h4",{children:["Descripcion: ",Object(Je.jsx)("span",{children:u})]}),Object(Je.jsxs)("h4",{children:["Estado: ",Object(Je.jsx)("span",{children:l})]})]}),"pendiente"===l&&Object(Je.jsx)("button",{onClick:function(t){t.preventDefault(),e(tt({tipo:"saldar deuda"}))},className:"btn boton-saldar",children:"Saldar cuota"})]})},Et=a(18),Dt=a(24),It=a.n(Dt),Mt=function(e){if(e){if((e=e.toString()).includes("script"))return!0;for(var t=0,a=["<",">",'"',"'","script"];t<a.length;t++){var n=a[t];if(e.includes(n))return!0}return!1}},Tt=function(e){var t,a,n,c,r,o,s,i,u,l,d,b,j,m,p,v,h,O,f,x,g,C,N,y,S,_,k;return"string"===typeof e&&(e.length<1||""===e||"-"===e||Mt(e))?{ok:!1,msg:"input no valido"}:e.fecha>Date.now()?{ok:!1,msg:"La fecha debe ser igual o menor al dia de hoy"}:(null===(t=e.cuenta)||void 0===t?void 0:t.length)<1||""===e.cuenta||"-"===e.cuenta||Mt(e.cuenta)?{ok:!1,msg:"Ingrese una cuenta v\xe1lida"}:""===e.nuevaCuenta||!isNaN(e.nuevaCuenta)||(null===(a=e.nuevaCuenta)||void 0===a?void 0:a.length)<2||Mt(e.nuevaCuenta)?{ok:!1,msg:"Ingrese una nueva cuenta v\xe1lida"}:(null===(n=e.from)||void 0===n?void 0:n.cuenta.length)<1||""===(null===(c=e.from)||void 0===c?void 0:c.cuenta)||"-"===(null===(r=e.from)||void 0===r?void 0:r.cuenta)||Mt(null===(o=e.from)||void 0===o?void 0:o.cuenta)?{ok:!1,msg:"Ingrese una cuenta a debitar v\xe1lida"}:(null===(s=e.to)||void 0===s?void 0:s.cuenta.length)<1||""===(null===(i=e.to)||void 0===i?void 0:i.cuenta)||"-"===(null===(u=e.to)||void 0===u?void 0:u.cuenta)||Mt(null===(l=e.to)||void 0===l?void 0:l.cuenta)?{ok:!1,msg:"Ingrese una cuenta a acreditar v\xe1lida"}:(null===(d=e.subcuenta)||void 0===d?void 0:d.length)<1||""===e.subcuenta||"-"===e.subcuenta||Mt(e.subcuenta)?{ok:!1,msg:"Ingrese una subcuenta v\xe1lida"}:""===e.nuevaSubcuenta||!isNaN(e.nuevaSubcuenta)||(null===(b=e.nuevaSubcuenta)||void 0===b?void 0:b.length)<2||Mt(e.nuevaSubcuenta)?{ok:!1,msg:"Ingrese una nueva subcuenta v\xe1lida"}:(null===(j=e.from)||void 0===j?void 0:j.subcuenta.length)<1||""===(null===(m=e.from)||void 0===m?void 0:m.subcuenta)||"-"===(null===(p=e.from)||void 0===p?void 0:p.subcuenta)||Mt(null===(v=e.from)||void 0===v?void 0:v.cuenta)?{ok:!1,msg:"Ingrese una subcuenta a debitar v\xe1lida"}:(null===(h=e.to)||void 0===h?void 0:h.subcuenta.length)<1||""===(null===(O=e.to)||void 0===O?void 0:O.subcuenta)||"-"===(null===(f=e.to)||void 0===f?void 0:f.subcuenta)||Mt(null===(x=e.to)||void 0===x?void 0:x.cuenta)?{ok:!1,msg:"Ingrese una subcuenta a acreditar v\xe1lida"}:""===e.prestador||!isNaN(e.prestador)||(null===(g=e.prestador)||void 0===g?void 0:g.length)<2||Mt(e.prestador)?{ok:!1,msg:"Ingrese un prestador v\xe1lido"}:""===e.tomador||!isNaN(e.tomador)||(null===(C=e.tomador)||void 0===C?void 0:C.length)<2||Mt(e.tomador)?{ok:!1,msg:"Ingrese un tomador v\xe1lido"}:(null===(N=e.categoria)||void 0===N?void 0:N.length)<1||""===e.categoria||"-"===e.categoria||Mt(e.categoria)?{ok:!1,msg:"Ingrese una categoria v\xe1lida"}:(null===(y=e.nombre)||void 0===y?void 0:y.length)<1||""===e.nombre||"-"===e.nombre||Mt(e.nombre)?{ok:!1,msg:"Ingrese un nuevo nombre de categoria v\xe1lido"}:(null===(S=e.sector)||void 0===S?void 0:S.length)<1||""===e.sector||"-"===e.sector||Mt(e.sector)?{ok:!1,msg:"Ingrese un nuevo nombre de sector v\xe1lido"}:void 0!==e.cantidad&&(e.cantidad<=0||""===e.cantidad||"-"===e.cantidad||isNaN(e.cantidad)||Mt(e.cantidad))?{ok:!1,msg:"Ingrese una cantidad v\xe1lida (mayor a cero)"}:Mt(e.descripcion)?{ok:!1,msg:'Descripcion no valida (evite los signos como: "<, >, "", `` )'}:""===e.nuevaCategoria||!isNaN(e.nuevaCategoria)||(null===(_=e.nuevaCategoria)||void 0===_?void 0:_.length)<2||Mt(e.nuevaCategoria)?{ok:!1,msg:"Ingrese un nuevo nombre de categoria v\xe1lido"}:void 0!==e.cuotasAPagar&&(e.cuotasAPagar<=0||""===e.cuotasAPagar||"-"===e.cuotasAPagar||isNaN(e.cuotasAPagar)||Mt(e.cuotasAPagar))?{ok:!1,msg:"Ingrese una cantidad de cuotas v\xe1lida (mayor a cero)"}:void 0!==e.cantidadAPagar&&(e.cantidadAPagar<=0||""===e.cantidadAPagar||"-"===e.cantidadAPagar||isNaN(e.cantidadAPagar)||Mt(e.cantidadAPagar))?{ok:!1,msg:"Ingrese una cantidad v\xe1lida (mayor a cero)"}:void 0!==e.cuotas&&(e.cuotas<=0||""===e.cuotas||"-"===e.cuotas||isNaN(e.cuotas)||Mt(e.cuotas))?{ok:!1,msg:"Ingrese una cantidad de cuotas v\xe1lida (mayor a cero)"}:(null===(k=e.monedaValuacion)||void 0===k?void 0:k.length)<1||""===e.monedaValuacion||"-"===e.monedaValuacion||Mt(e.monedaValuacion)?{ok:!1,msg:"Ingrese una moneda para valuaci\xf3n v\xe1lida"}:{ok:!0}},Lt=function(e){var t=Object(r.c)((function(e){return e.movs})),a=t.movs,n=t.activeMov,c=Object(r.c)((function(e){return e.modals})).typeModal,o=Object(r.c)((function(e){return e.cats})).categorias,s=Object(r.c)((function(e){return e.cuentas})).cuentas,i=a.filter((function(e){return"prestamo"!==e.tipo&&"transferencia"!==e.tipo&&"deuda"!==e.tipo})),u=s.map((function(e){return e.nombre})),l=[];return l=e?o.filter((function(t){return t.tipo===e})).map((function(e){return e.nombre})).sort():o.filter((function(e){return e.tipo===c})).map((function(e){return e.nombre})).sort(),{movs:a,activeMov:n,typeModal:c,totalMovimientos:i,cuentas:s,nombreCuentas:u,nombreCategorias:l}},Vt=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/dnnlsb3bs/upload",(a=new FormData).append("upload_preset","cuentas-claras"),a.append("file",t),e.prev=4,e.next=7,fetch("https://api.cloudinary.com/v1_1/dnnlsb3bs/upload",{method:"POST",body:a});case 7:if(!(n=e.sent).ok){e.next=15;break}return e.next=11,n.json();case 11:return c=e.sent,e.abrupt("return",c.secure_url);case 15:return e.next=17,n.json();case 17:throw e.sent;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(4),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(t){return e.apply(this,arguments)}}(),Ut=function(e){var t=e.formValues,a=e.isLoading,n=e.setIsLoading,c=Object(s.useRef)(!0);Object(s.useEffect)((function(){return function(){c.current=!1}}),[]);var r=Object(s.useState)(t.url),i=Object(o.a)(r,2),u=i[0],l=i[1],d=Object(s.useRef)(),b=function(){var e=Object(p.a)(m.a.mark((function e(a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),0!==a.target.files.length){e.next=5;break}l(!1),e.next=10;break;case 5:return n(!0),e.next=8,Vt(a.target.files[0]);case 8:r=e.sent,c.current&&(t.url=r,l(!0),n(!1));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Je.jsxs)("div",{className:"modal__section",children:[Object(Je.jsx)("input",{ref:d,multiple:!1,onChange:b,type:"file",name:"factura",id:"factura",accept:".png, .jpg, .jpeg, .pdf"}),Object(Je.jsx)("button",{className:"btn ".concat(u?"added":""),onClick:function(e){e.preventDefault(),d.current.click()},children:u?Object(Je.jsxs)(Je.Fragment,{children:["Comprobante agregado ",Object(Je.jsx)("i",{className:"bi bi-file-earmark-check"})]}):Object(Je.jsxs)(Je.Fragment,{children:["Agregar comprobante ",Object(Je.jsx)("i",{className:"bi bi-file-earmark-arrow-up"})]})}),a&&Object(Je.jsx)("p",{children:"Cargando..."})]})},Rt=function(e){var t=e.handleClose,a=Object(r.b)(),n=Object(s.useState)(!1),c=Object(o.a)(n,2),i=c[0],u=c[1],l=Object(s.useState)(!1),d=Object(o.a)(l,2),b=d[0],j=d[1],m=Object(s.useState)(""),p=Object(o.a)(m,2),v=p[0],O=p[1],f=Object(s.useState)({nombre:"",sector:""}),x=Object(o.a)(f,2),g=x[0],C=x[1],N=Object(s.useState)(""),y=Object(o.a)(N,2),S=y[0],_=y[1],k=Lt("gasto"),A=k.activeMov,w=k.nombreCuentas,F=k.nombreCategorias,P=k.cuentas,E=Ze(A||{fecha:Date.now(),cuenta:w[0],prestador:"",tipo:"deuda",categoria:F[0],cantidad:0,cantidadPagada:0,cuotas:1,cuotasPagadas:0,descripcion:"",estado:"pendiente"}),D=Object(o.a)(E,3),I=D[0],M=D[1],T=D[2];return Object(Je.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=Tt(I);if(n.ok){if("nuevaCuenta"===I.cuenta){var c=Tt(v);if(!c.ok)return void j(c.msg);I.cuenta=v,a(Ce({nombre:v,subcuentas:[]}))}if("nuevaCategoria"===I.categoria){var r=Tt(g);if(!r.ok)return void j(r.msg);I.categoria=g.nombre,a(me({nombre:g.nombre,tipo:"gasto",sector:g.sector}))}if("nuevoActivo"===I.categoria){var o=Tt(S);if(!o.ok)return void j(o.msg);I.categoria=S,a(ye({id:P.find((function(e){return"Activos"===e.nombre})).id,nombre:"Activos",subcuentas:[].concat(Object(Et.a)(P.find((function(e){return"Activos"===e.nombre})).subcuentas),[S])}))}A?(a(ze(I)),h.a.fire("Nueva edici\xf3n","Movimiento editado correctamente","success")):(a(De(Object(le.a)(Object(le.a)({},I),{},{id:Date.now()}),"nuevaDeuda")),h.a.fire("Nueva deuda","Movimiento creado correctamente","success")),t(e)}else j(n.msg)},children:[Object(Je.jsxs)("div",{className:"form-container",children:[Object(Je.jsx)("h1",{children:A?"Editar movimiento":"Nueva deuda"}),b&&Object(Je.jsx)("div",{className:"msg-error",children:b}),Object(Je.jsx)(It.a,{onChange:T,value:I.fecha,name:"fecha",format:"dd-MM-y",className:"calendar"}),Object(Je.jsxs)("div",{className:"modal__section cuenta-principal",children:[Object(Je.jsx)("label",{htmlFor:"cuenta",children:"Cuenta: "}),Object(Je.jsxs)("select",{name:"cuenta",value:I.cuenta,onChange:M,children:[w.map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)})),Object(Je.jsx)("option",{value:"nuevaCuenta",children:"...nueva cuenta"})]}),"nuevaCuenta"===I.cuenta&&Object(Je.jsx)("input",{value:v,onChange:function(e){return O(e.target.value)},autoFocus:!0,type:"text",placeholder:"Nueva cuenta"})]}),Object(Je.jsxs)("div",{className:"modal__section",children:[Object(Je.jsx)("label",{htmlFor:"prestador",children:"Prestador: "}),Object(Je.jsx)("div",{className:"prestador",children:Object(Je.jsx)("input",{type:"text",name:"prestador",value:I.prestador,onChange:M,placeholder:"Nombre del prestador"})})]}),Object(Je.jsxs)("div",{className:"modal__section motivo",children:[Object(Je.jsx)("label",{htmlFor:"motivo",children:"Motivo: "}),Object(Je.jsxs)("select",{name:"categoria",value:I.categoria,onChange:M,className:"nuevaCategoria"===I.categoria?"un-focus":"",children:[Object(Je.jsxs)("optgroup",{label:"Categorias",children:[F.map((function(e){return Object(Je.jsx)("option",{value:e,multiple:!1,children:e},e)})),Object(Je.jsx)("option",{value:"nuevaCategoria",children:"...nueva categoria"})]}),Object(Je.jsxs)("optgroup",{label:"Activos",children:[P.find((function(e){return"Activos"===e.nombre})).subcuentas.map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)})),Object(Je.jsx)("option",{value:"nuevoActivo",children:"...nuevo bien personal"})]})]}),"nuevaCategoria"===I.categoria&&Object(Je.jsxs)(Je.Fragment,{children:[Object(Je.jsx)("label",{htmlFor:"nuevaCategoria",children:"Nombre nueva categoria:"}),Object(Je.jsx)("input",{id:"nuevaCategoria",name:"nombre",value:g.nombre,onChange:function(e){return C(Object(le.a)(Object(le.a)({},g),{},Object(Ye.a)({},e.target.name,e.target.value)))},autoFocus:!0,type:"text",placeholder:"Ej. Comida, Boliche, Sueldo"}),Object(Je.jsx)("label",{htmlFor:"nuevoSector",children:"Sector:"}),Object(Je.jsx)("input",{id:"nuevoSector",name:"sector",value:g.sector,onChange:function(e){return C(Object(le.a)(Object(le.a)({},g),{},Object(Ye.a)({},e.target.name,e.target.value)))},type:"text",placeholder:"Ej. Hogar, Higiene, Salud"})]}),"nuevoActivo"===I.categoria&&Object(Je.jsxs)(Je.Fragment,{children:[Object(Je.jsx)("label",{htmlFor:"nuevoActivo",children:"Nombre nuevo bien personal:"}),Object(Je.jsx)("input",{id:"nuevoActivo",name:"nombre",value:S,onChange:function(e){return _(e.target.value)},autoFocus:!0,type:"text",placeholder:"Ej. Auto, moto, depto"})]})]}),Object(Je.jsxs)("div",{className:"modal__section ",children:[Object(Je.jsx)("label",{htmlFor:"cantidad",children:"Cantidad: "}),Object(Je.jsxs)("div",{className:"cantidad",children:["$",Object(Je.jsx)("input",{type:"number",name:"cantidad",value:I.cantidad,onChange:M,placeholder:"1000",min:0,step:1e-7})]})]}),Object(Je.jsxs)("div",{className:"modal__section ",children:[Object(Je.jsx)("label",{htmlFor:"cuotas",children:"Cuotas: "}),Object(Je.jsx)("input",{type:"number",name:"cuotas",value:I.cuotas,onChange:M,placeholder:"1",min:1})]}),Object(Je.jsx)(Ut,{formValues:I,isLoading:i,setIsLoading:u}),Object(Je.jsx)("textarea",{className:"textarea",name:"descripcion",value:I.descripcion,onChange:M,placeholder:"Descripci\xf3n(opcional)"})]}),Object(Je.jsxs)("div",{className:"botones",children:[Object(Je.jsx)("button",{className:" btn boton-submit",disabled:!!i,type:"submit",children:"Guardar"}),Object(Je.jsx)("button",{onClick:t,className:"btn btn-secondary boton-cancel",children:"Cancelar"}),A&&Object(Je.jsx)("button",{onClick:function(e){e.preventDefault(),window.confirm("\xbfSeguro que desea eliminar el evento? No podra recupararlo despues")&&(a(Be(A.id)),t(e),h.a.fire("Eliminado","Movimiento eliminado correctamente","success"))},className:" btn btn-danger boton-eliminar",children:"Eliminar"})]})]})},zt=function(e){var t=e.modo,a=e.handleClose;return Object(Je.jsx)(Je.Fragment,{children:"solo ver"===t?Object(Je.jsx)(Pt,{handleClose:a}):Object(Je.jsx)(Rt,{handleClose:a})})},Gt=function(e){var t,a=e.handleClose,n=Object(r.b)(),c=Object(r.c)((function(e){return e.cuentas})).cuentas,i=Object(s.useState)(""),u=Object(o.a)(i,2),l=u[0],d=u[1],b=Object(s.useState)(!1),j=Object(o.a)(b,2),m=j[0],p=j[1],v=Lt("gasto"),O=v.activeMov,f=v.nombreCuentas,x=v.nombreCategorias,g=Ze(Object(le.a)(Object(le.a)({},O),{},{subcuenta:"-",cuotasAPagar:1,cantidadAPagar:O.cantidad-O.cantidadPagada})),C=Object(o.a)(g,3),N=C[0],y=C[1],S=C[2];return t="nuevaCuenta"===N.cuenta?"-":c.find((function(e){return e.nombre===N.cuenta})).subcuentas,Object(Je.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),parseInt(N.cantidad)-parseInt(N.cantidadPagada)-parseInt(N.cantidadAPagar)===0&&parseInt(N.cuotas)-parseInt(N.cuotasPagadas)-parseInt(N.cuotasAPagar)>0)h.a.fire("Cuidado","Estas tratando de abonar el total sin terminar de abonar todas las cuotas, por favor completa con las cuotas restantes o revisa el monto","error");else if(parseInt(N.cantidad)-parseInt(N.cantidadPagada)-parseInt(N.cantidadAPagar)>0&&parseInt(N.cuotas)-parseInt(N.cuotasPagadas)-parseInt(N.cuotasAPagar)===0)h.a.fire("Cuidado","Estas tratando de abonar el total de las cuotas sin terminar de abonar la cantidad total, por favor completa con el monto restante o revisa las cuotas","error");else{var t=Tt(N);if(t.ok){if("nuevaCuenta"!==N.cuenta&&"nuevaSubcuenta"===N.subcuenta){var r=Tt(l);if(!r.ok)return void p(r.msg);N.subcuenta=l,n(ye({id:c.find((function(e){return e.nombre===N.cuenta})).id,nombre:N.cuenta,subcuentas:[].concat(Object(Et.a)(c.find((function(e){return e.nombre===N.cuenta})).subcuentas),[l])}))}O.cuotasPagadas=N.cuotasPagadas+parseInt(N.cuotasAPagar),O.cantidadPagada=N.cantidadPagada+parseInt(N.cantidadAPagar),O.estado=N.cuotas-N.cuotasPagadas-N.cuotasAPagar>0?"pendiente":"saldado",n(ze(O)),n(De({id:Date.now(),idReferencia:N.id,fecha:N.fecha,cantidad:N.cantidadAPagar,cuenta:N.cuenta,subcuenta:N.subcuenta,categoria:N.categoria,aQuien:O.prestador,tipo:"gasto",cuotas:N.cuotasAPagar},"nuevoGasto")),h.a.fire("Pago realizado","".concat(N.cuotasAPagar," cuotas abonadas correctamente"),"success"),a(e)}else p(t.msg)}},children:[Object(Je.jsxs)("div",{className:"form-container",children:[Object(Je.jsx)("h1",{children:"Saldar deuda"}),m&&Object(Je.jsx)("div",{className:"msg-error",children:m}),Object(Je.jsx)(It.a,{onChange:S,value:N.fecha,name:"fecha",format:"dd-MM-y",className:"calendar"}),Object(Je.jsxs)("div",{className:"modal__section cuenta-principal",children:[Object(Je.jsx)("label",{htmlFor:"cuenta",children:"Cuenta: "}),Object(Je.jsxs)("select",{disabled:!0,name:"cuenta",value:N.cuenta,onChange:y,children:[f.map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)})),Object(Je.jsx)("option",{value:"nuevaCuenta",children:"nueva cuenta"})]})]}),Object(Je.jsxs)("div",{className:"modal__section cuenta-secundaria",children:[Object(Je.jsx)("label",{htmlFor:"subcuenta",children:"Subcuenta: "}),Object(Je.jsxs)("select",{name:"subcuenta",value:N.subcuenta,onChange:y,children:[Object(Je.jsx)("option",{value:"-",children:"-"}),t.map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)})),Object(Je.jsx)("option",{value:"nuevaSubcuenta",children:"nueva subcuenta"})]}),"nuevaSubcuenta"===N.subcuenta&&Object(Je.jsx)("input",{value:l,onChange:function(e){return d(e.target.value)},autoFocus:!0,type:"text",placeholder:"Nueva subcuenta"})]}),Object(Je.jsxs)("div",{className:"modal__section",children:[Object(Je.jsx)("label",{htmlFor:"prestador",children:"Prestador: "}),Object(Je.jsx)("div",{className:"prestador",children:Object(Je.jsx)("input",{disabled:!0,type:"text",name:"prestador",value:N.prestador,onChange:y,placeholder:"Nombre"})})]}),Object(Je.jsxs)("div",{className:"modal__section motivo",children:[Object(Je.jsx)("label",{htmlFor:"motivo",children:"Motivo: "}),Object(Je.jsxs)("select",{disabled:!0,name:"categoria",value:N.categoria,onChange:y,children:[Object(Je.jsxs)("optgroup",{label:"Categorias",children:[x.map((function(e){return Object(Je.jsx)("option",{value:e,multiple:!1,children:e},e)})),Object(Je.jsx)("option",{value:"nuevaCategoria",children:"...nueva categoria"})]}),Object(Je.jsxs)("optgroup",{label:"Activos",children:[c.find((function(e){return"Activos"===e.nombre})).subcuentas.map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)})),Object(Je.jsx)("option",{value:"nuevoActivo",children:"...nuevo bien personal"})]})]})]}),Object(Je.jsxs)("div",{className:"modal__section ",children:[Object(Je.jsx)("label",{htmlFor:"cantidadAPagar",children:"Cantidad: "}),Object(Je.jsxs)("div",{className:"cantidad",children:["$",Object(Je.jsx)("input",{disabled:parseInt(N.cuotas)-parseInt(N.cuotasPagadas)===1,type:"number",name:"cantidadAPagar",value:N.cantidadAPagar,max:parseInt(N.cantidad)-parseInt(N.cantidadPagada),min:0,step:1e-7,onChange:y,placeholder:1})]}),Object(Je.jsxs)("p",{children:["Quedarian abonar: $ ",O.cantidad-O.cantidadPagada]})]}),Object(Je.jsxs)("div",{className:"modal__section ",children:[Object(Je.jsx)("label",{htmlFor:"cuotasaPagar",children:"Cuotas: "}),Object(Je.jsx)("input",{disabled:parseInt(N.cuotas)-parseInt(N.cuotasPagadas)===1,type:"number",name:"cuotasAPagar",value:N.cuotasAPagar,max:parseInt(N.cuotas)-parseInt(N.cuotasPagadas),min:1,onChange:y,placeholder:"1"}),Object(Je.jsxs)("p",{children:["Quedarian: ",O.cuotas-O.cuotasPagadas," cuotas por pagar"]})]}),Object(Je.jsx)("textarea",{className:"textarea",name:"descripcion",value:N.descripcion,onChange:y,placeholder:"Descripci\xf3n(opcional)"})]}),Object(Je.jsxs)("div",{className:"botones",children:[Object(Je.jsx)("button",{className:" btn boton-submit",type:"submit",children:"Saldar deuda"}),Object(Je.jsx)("button",{onClick:a,className:"btn btn-secondary boton-cancel",children:"Cancelar"})]})]})},Bt=function(e){var t,a=e.handleClose,n=Object(r.b)(),c=Object(r.c)((function(e){return e.cuentas})).cuentas,i=Object(r.c)((function(e){return e.modals})).title,u=Object(s.useState)(""),l=Object(o.a)(u,2),d=l[0],b=l[1],j=Object(s.useState)(!1),m=Object(o.a)(j,2),p=m[0],v=m[1],O=Lt(),f=O.activeMov,x=O.nombreCuentas,g=Ze(Object(le.a)(Object(le.a)({},f),{},{cantidadAPagar:f.cantidad-f.cantidadPagada,cuotasAPagar:1})),C=Object(o.a)(g,3),N=C[0],y=C[1],S=C[2];return t="nuevaCuenta"===N.cuenta?"-":c.find((function(e){return e.nombre===N.cuenta})).subcuentas,Object(Je.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),parseInt(N.cantidad)-parseInt(N.cantidadPagada)-parseInt(N.cantidadAPagar)===0&&parseInt(N.cuotas)-parseInt(N.cuotasPagadas)-parseInt(N.cuotasAPagar)>0)h.a.fire("Cuidado","Estas tratando de abonar el total sin terminar de abonar todas las cuotas, por favor completa con las cuotas restantes o revisa el monto","error");else if(parseInt(N.cantidad)-parseInt(N.cantidadPagada)-parseInt(N.cantidadAPagar)>0&&parseInt(N.cuotas)-parseInt(N.cuotasPagadas)-parseInt(N.cuotasAPagar)===0)h.a.fire("Cuidado","Estas tratando de abonar el total de las cuotas sin terminar de abonar la cantidad total, por favor completa con el monto restante o revisa las cuotas","error");else{var t=Tt(N);if(t.ok){if("nuevaCuenta"!==N.cuenta&&"nuevaSubcuenta"===N.subcuenta){var r=Tt(d);if(!r.ok)return void v(r.msg);N.subcuenta=d,n(ye({id:c.find((function(e){return e.nombre===N.cuenta})).id,nombre:N.cuenta,subcuentas:[].concat(Object(Et.a)(c.find((function(e){return e.nombre===N.cuenta})).subcuentas),[d])}))}f.cuotasPagadas=N.cuotasPagadas+parseInt(N.cuotasAPagar),f.cantidadPagada=N.cantidadPagada+parseInt(N.cantidadAPagar),f.estado=N.cuotas-N.cuotasPagadas-N.cuotasAPagar>0?"pendiente":"saldado",n(ze(f)),"prestamo"===f.tipo?(n(De({id:Date.now(),idReferencia:N.id,fecha:N.fecha,cantidad:N.cantidadAPagar,cuenta:N.cuenta,subcuenta:N.subcuenta,categoria:"pago "+N.tipo,aQuien:f.prestador,cuotas:N.cuotasAPagar,tipo:"gasto"},"nuevoGasto")),h.a.fire("Pago realizado","".concat(N.cuotasAPagar," cuotas abonadas correctamente"),"success")):"deudaACobrar"===f.tipo&&(n(De({id:Date.now(),idReferencia:N.id,fecha:N.fecha,cantidad:N.cantidadAPagar,cuenta:N.cuenta,subcuenta:N.subcuenta,categoria:"cobro prestamo",deQuien:f.tomador,tipo:"ingreso",cuotas:N.cuotasAPagar},"nuevoIngreso")),h.a.fire("Cobro realizado","".concat(N.cuotasAPagar," cuotas cobradas correctamente"),"success")),a(e)}else v(t.msg)}},children:[Object(Je.jsxs)("div",{className:"form-container",children:[Object(Je.jsx)("h1",{children:"prestamo"===i?"Saldar Prestamo":"Saldar deuda a cobrar"}),p&&Object(Je.jsx)("div",{className:"msg-error",children:p}),Object(Je.jsx)(It.a,{onChange:S,value:N.fecha,name:"fecha",format:"dd-MM-y",className:"calendar"}),Object(Je.jsxs)("div",{className:"modal__section cuenta-principal",children:[Object(Je.jsx)("label",{htmlFor:"cuenta",children:"Cuenta: "}),Object(Je.jsxs)("select",{disabled:!0,name:"cuenta",value:N.cuenta,onChange:y,children:[x.map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)})),Object(Je.jsx)("option",{value:"nuevaCuenta",children:"nueva cuenta"})]})]}),Object(Je.jsxs)("div",{className:"modal__section cuenta-secundaria",children:[Object(Je.jsx)("label",{htmlFor:"subcuenta",children:"Subcuenta: "}),Object(Je.jsxs)("select",{name:"subcuenta",value:N.subcuenta,onChange:y,children:[Object(Je.jsx)("option",{value:"-",children:"-"}),"nuevaCuenta"!==N.cuenta&&t.map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)})),Object(Je.jsx)("option",{value:"nuevaSubcuenta",children:"nueva subcuenta"})]}),"nuevaSubcuenta"===N.subcuenta&&Object(Je.jsx)("input",{value:d,onChange:function(e){return b(e.target.value)},autoFocus:!0,type:"text",placeholder:"Nueva subcuenta"})]}),Object(Je.jsx)("div",{className:"modal__section",children:N.prestador?Object(Je.jsxs)(Je.Fragment,{children:[Object(Je.jsx)("label",{htmlFor:"prestador",children:"Prestador: "}),Object(Je.jsx)("div",{className:"prestador",children:Object(Je.jsx)("input",{disabled:!0,type:"text",name:"prestador",value:N.prestador,onChange:y,placeholder:"Nombre"})})]}):Object(Je.jsxs)(Je.Fragment,{children:[Object(Je.jsx)("label",{htmlFor:"tomador",children:"Tomador: "}),Object(Je.jsx)("div",{className:"tomador",children:Object(Je.jsx)("input",{disabled:!0,type:"text",name:"tomador",value:N.tomador,onChange:y,placeholder:"Nombre"})})]})}),Object(Je.jsxs)("div",{className:"modal__section ",children:[Object(Je.jsx)("label",{htmlFor:"cantidadAPagar",children:"Cantidad: "}),Object(Je.jsxs)("div",{className:"cantidad",children:["$",Object(Je.jsx)("input",{disabled:parseInt(N.cuotas)-parseInt(N.cuotasPagadas)===1,type:"number",name:"cantidadAPagar",value:N.cantidadAPagar,max:parseInt(N.cantidad)-parseInt(N.cantidadPagada),min:0,step:1e-7,onChange:y,placeholder:1})]}),Object(Je.jsxs)("p",{children:["Quedarian abonar: $ ",f.cantidad-f.cantidadPagada]})]}),Object(Je.jsxs)("div",{className:"modal__section ",children:[Object(Je.jsx)("label",{htmlFor:"cuotasaPagar",children:"Cuotas: "}),Object(Je.jsx)("input",{disabled:parseInt(N.cuotas)-parseInt(N.cuotasPagadas)===1,type:"number",name:"cuotasAPagar",value:N.cuotasAPagar,max:parseInt(N.cuotas)-parseInt(N.cuotasPagadas),min:1,onChange:y,placeholder:"1"}),Object(Je.jsxs)("p",{children:["Quedarian: ",f.cuotas-f.cuotasPagadas," cuotas por pagar"]})]}),Object(Je.jsx)("textarea",{className:"textarea",name:"descripcion",value:N.descripcion,onChange:y,placeholder:"Descripci\xf3n(opcional)"})]}),Object(Je.jsxs)("div",{className:"botones",children:[Object(Je.jsx)("button",{className:" btn boton-submit",type:"submit",children:"Saldar cuota"}),Object(Je.jsx)("button",{onClick:a,className:"btn btn-secondary boton-cancel",children:"Cancelar"})]})]})},Ht=function(){var e=Object(r.c)((function(e){return e.movs.activeMov})),t=e.cantidad,a=e.categoria,n=e.cuenta,c=e.subcuenta,o=e.fecha,s=e.descripcion,i=e.cuotas,u=e.aQuien,l=e.url;return Object(Je.jsxs)("div",{className:"detalle__form",children:[Object(Je.jsx)("h1",{children:"Detalle gasto"}),Object(Je.jsxs)("section",{className:"detalle__section",children:[Object(Je.jsxs)("h4",{children:["Tipo: ",Object(Je.jsx)("span",{children:" Gasto "})]}),Object(Je.jsxs)("h4",{children:["Fecha: ",Object(Je.jsx)("span",{children:o.toLocaleDateString()})]}),Object(Je.jsxs)("h4",{children:["Cantidad: ",Object(Je.jsxs)("span",{children:["$ ",Math.abs(t)]})]}),Object(Je.jsxs)("h4",{children:["Cuenta debitada: ",Object(Je.jsx)("span",{children:n})]}),Object(Je.jsxs)("h4",{children:["Subcuenta: ",Object(Je.jsx)("span",{children:c})]}),i&&Object(Je.jsxs)("h4",{children:["Cuotas: ",Object(Je.jsx)("span",{children:i})]}),Object(Je.jsxs)("h4",{children:["Motivo: ",Object(Je.jsx)("span",{children:a})]}),u&&Object(Je.jsxs)("h4",{children:["Pago a: ",Object(Je.jsx)("span",{children:u})]}),l&&Object(Je.jsxs)("h4",{children:["Comprobante: ",Object(Je.jsx)("a",{href:l,target:"_blank",rel:"noreferrer",children:"Ver comprobante"})]}),Object(Je.jsxs)("h4",{children:["Descripcion: ",Object(Je.jsx)("span",{children:s})]})]})]})},$t=function(e){var t,a,n=e.handleClose,c=Object(r.b)(),i=Object(r.c)((function(e){return e.cuentas})).cuentas,u=Object(r.c)((function(e){return e.pares})).pares,l=Object(s.useState)(!1),d=Object(o.a)(l,2),b=d[0],j=d[1],v=Object(s.useState)(!1),f=Object(o.a)(v,2),x=f[0],g=f[1],N=Object(s.useState)(""),y=Object(o.a)(N,2),S=y[0],_=y[1],k=Object(s.useState)(""),A=Object(o.a)(k,2),w=A[0],F=A[1],P=Object(s.useState)({nombre:"",sector:""}),E=Object(o.a)(P,2),D=E[0],I=E[1],M=Object(s.useState)(""),T=Object(o.a)(M,2),L=T[0],V=T[1],U=Lt(),R=U.typeModal,z=U.activeMov,G=U.nombreCuentas,B=U.nombreCategorias,H=U.movs,$=Ze(z||{fecha:new Date,cuenta:G[0],subcuenta:null===(t=i.find((function(e){return e.nombre===G[0]})))||void 0===t?void 0:t.subcuentas[0],categoria:B[0],cantidad:"",descripcion:"",url:""}),q=Object(o.a)($,3),Q=q[0],X=q[1],Y=q[2];Q.fecha=new Date(Q.fecha);var Z,J=(null===z||void 0===z?void 0:z.idReferencia)&&H.find((function(e){return e.id===z.idReferencia}));return Z="nuevaCuenta"===Q.cuenta?"-":null===(a=i.find((function(e){return e.nombre===Q.cuenta})))||void 0===a?void 0:a.subcuentas,Object(Je.jsx)(Je.Fragment,{children:Object(Je.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),Q.fecha=Date.parse(Q.fecha),parseInt(null===J||void 0===J?void 0:J.cantidad)-(parseInt(null===J||void 0===J?void 0:J.cantidadPagada)-(null===z||void 0===z?void 0:z.cantidad))-parseInt(Q.cantidad)===0&&parseInt(null===J||void 0===J?void 0:J.cuotas)-(parseInt(null===J||void 0===J?void 0:J.cuotasPagadas)-(null===z||void 0===z?void 0:z.cuotas))-parseInt(Q.cuotas)>0)h.a.fire("Cuidado","Estas tratando de abonar el total sin terminar de abonar todas las cuotas, por favor completa con las cuotas restantes o revisa el monto","error");else if(parseInt(null===J||void 0===J?void 0:J.cantidad)-(parseInt(null===J||void 0===J?void 0:J.cantidadPagada)-(null===z||void 0===z?void 0:z.cantidad))-parseInt(Q.cantidad)>0&&parseInt(null===J||void 0===J?void 0:J.cuotas)-(parseInt(null===J||void 0===J?void 0:J.cuotasPagadas)-(null===z||void 0===z?void 0:z.cuotas))-parseInt(Q.cuotas)===0)h.a.fire("Cuidado","Estas tratando de abonar el total de las cuotas sin terminar de abonar la cantidad total, por favor completa con el monto restante o revisa las cuotas","error");else{var t=Tt(Q);if(t.ok){if("nuevaCuenta"===Q.cuenta){if(!Tt({nuevaCuenta:S,nuevaSubcuenta:w}).ok)return void g("Nuevos nombres de cuentas no v\xe1lidos");Q.cuenta=S,Q.subcuenta=w,c(Ce({nombre:S,subcuentas:[w]}))}if("nuevaCuenta"!==Q.cuenta&&"nuevaSubcuenta"===Q.subcuenta){var a=Tt(w);if(!a.ok)return void g(a.msg);Q.subcuenta=w,c(ye({id:i.find((function(e){return e.nombre===Q.cuenta})).id,nombre:Q.cuenta,subcuentas:[].concat(Object(Et.a)(i.find((function(e){return e.nombre===Q.cuenta})).subcuentas),[w])}))}if("nuevaCategoria"===Q.categoria){var r=Tt(D);if(!r.ok)return void g(r.msg);Q.categoria=D.nombre,c(me({nombre:D.nombre,tipo:R,sector:D.sector}))}var o;z?(z.idReferencia&&c((o={idReferencia:z.idReferencia,subcuenta:Q.subcuenta,cantidadAnterior:parseInt(z.cantidad),cantidadNueva:parseInt(Q.cantidad),cuotasAnterior:z.cuotas,cuotasNuevas:parseInt(Q.cuotas)},function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().auth.uid,e.next=3,Object(O.e)(Object(O.b)(C,"".concat(n,"/app/movimientos")));case 3:e.sent.forEach((function(e){e.id===o.idReferencia&&t(ze(Object(le.a)(Object(le.a)({},e.data()),{},{id:e.id,subcuenta:o.subcuenta,cantidadPagada:e.data().cantidadPagada-o.cantidadAnterior+o.cantidadNueva,cuotasPagadas:e.data().cuotasPagadas-o.cuotasAnterior+o.cuotasNuevas,estado:e.data().cantidad-(e.data().cantidadPagada-o.cantidadAnterior)-o.cantidadNueva>0?"pendiente":"saldado"})))}));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())),c(ze(Q)),h.a.fire("Nueva edici\xf3n","Movimiento editado correctamente","success")):"ingreso"===R?("Activos"!==Q.cuenta&&"Otras criptomonedas"!==Q.cuenta||(Q.cantidad=it([{nombre:L,valor:parseInt(Q.cantidad)}],"USD",u),Q.monedaValuacion="USD"),c(De(Object(le.a)({tipo:R},Q),"nuevoIngreso")),h.a.fire("Nuevo movimiento","Movimiento creado correctamente","success")):"gasto"===R&&(c(De(Object(le.a)({tipo:R},Q),"nuevoGasto")),h.a.fire("Nuevo movimiento","Movimiento creado correctamente","success")),n(e)}else g(t.msg)}},children:[Object(Je.jsxs)("div",{className:"form-container",children:[Object(Je.jsxs)("h1",{children:[z?"Editar movimiento":"Nuevo ".concat(R)," "]}),x&&Object(Je.jsx)("div",{className:"msg-error",children:x}),Object(Je.jsx)(It.a,{onChange:Y,value:Q.fecha,name:"fecha",format:"dd-MM-y",className:"calendar",maxDate:new Date}),Object(Je.jsxs)("div",{className:"modal__section cuenta-principal",children:[Object(Je.jsx)("label",{htmlFor:"cuenta",children:"ingreso"===R?"Cuenta a acreditar:":"Cuenta a debitar:"}),Object(Je.jsxs)("select",{disabled:!!(null===z||void 0===z?void 0:z.idReferencia),name:"cuenta",value:Q.cuenta,onChange:X,children:[G.map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)})),Object(Je.jsx)("option",{value:"nuevaCuenta",children:"...nueva cuenta"})]}),"nuevaCuenta"===Q.cuenta&&Object(Je.jsx)("input",{value:S,onChange:function(e){return _(e.target.value)},autoFocus:!0,type:"text",placeholder:"Nueva cuenta"})]}),Object(Je.jsxs)("div",{className:"modal__section cuenta-secundaria",children:[Object(Je.jsx)("label",{htmlFor:"subcuenta",children:"Subcuenta: "}),Object(Je.jsxs)("select",{name:"subcuenta",value:Q.subcuenta,onChange:X,children:[Object(Je.jsx)("option",{value:"-",children:"-"}),"nuevaCuenta"!==Q.cuenta&&Z.map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)})),Object(Je.jsx)("option",{value:"nuevaSubcuenta",children:"...nueva subcuenta"})]}),"nuevaSubcuenta"===Q.subcuenta&&Object(Je.jsx)("input",{value:w,onChange:function(e){return F(e.target.value)},autoFocus:!0,type:"text",placeholder:"Nueva subcuenta"})]}),("Activos"===Q.cuenta||"Otras criptomonedas"===Q.cuenta)&&Object(Je.jsxs)("div",{className:"modal__section",children:[Object(Je.jsx)("label",{htmlFor:"monedaValuacion",children:"En que moneda se valua:"}),Object(Je.jsxs)("select",{name:"monedaValuacion",id:"monedaValuacion",value:L,onChange:function(e){return V(e.target.value)},children:[Object(Je.jsx)("option",{value:"-",children:"-"}),G.filter((function(e){return"Activos"!==e})).map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)}))]})]}),Object(Je.jsxs)("div",{className:"modal__section motivo",children:[Object(Je.jsx)("label",{htmlFor:"motivo",children:"Motivo: "}),Object(Je.jsxs)("select",{disabled:!!(null===z||void 0===z?void 0:z.idReferencia),name:"categoria",value:Q.categoria,onChange:X,children:[B.map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)})),Object(Je.jsx)("option",{value:"nuevaCategoria",children:"...nueva categoria"})]}),"nuevaCategoria"===Q.categoria&&Object(Je.jsxs)(Je.Fragment,{children:[Object(Je.jsx)("label",{htmlFor:"nuevaCategoria",children:"Nombre nueva categoria:"}),Object(Je.jsx)("input",{id:"nuevaCategoria",name:"nombre",value:D.nombre,onChange:function(e){return I(Object(le.a)(Object(le.a)({},D),{},Object(Ye.a)({},e.target.name,e.target.value)))},autoFocus:!0,type:"text",placeholder:"Ej. Comida, Boliche, Sueldo"}),Object(Je.jsx)("label",{htmlFor:"nuevoSector",children:"Sector:"}),Object(Je.jsx)("input",{id:"nuevoSector",name:"sector",value:D.sector,onChange:function(e){return I(Object(le.a)(Object(le.a)({},D),{},Object(Ye.a)({},e.target.name,e.target.value)))},type:"text",placeholder:"Ej. Hogar, Higiene, Salud"})]})]}),Object(Je.jsxs)("div",{className:"modal__section ",children:[Object(Je.jsx)("label",{htmlFor:"cantidad",children:"Cantidad: "}),Object(Je.jsxs)("div",{className:"cantidad",children:["$",Object(Je.jsx)("input",{type:"number",name:"cantidad",value:Q.cantidad,onChange:X,max:J&&(null===J||void 0===J?void 0:J.cantidad)-((null===J||void 0===J?void 0:J.cantidadPagada)-(null===z||void 0===z?void 0:z.cantidad)),min:0,step:1e-7,placeholder:"1000"})]}),(null===z||void 0===z?void 0:z.idReferencia)&&Object(Je.jsxs)("p",{children:["La cantidad restante es: ",(null===J||void 0===J?void 0:J.cantidad)-((null===J||void 0===J?void 0:J.cantidadPagada)-(null===z||void 0===z?void 0:z.cantidad))]})]}),(null===z||void 0===z?void 0:z.idReferencia)&&Object(Je.jsxs)("div",{className:"modal__section ",children:[Object(Je.jsx)("label",{htmlFor:"cuotasaPagar",children:"Cuotas: "}),Object(Je.jsx)("input",{type:"number",name:"cuotas",value:Q.cuotas,max:(null===J||void 0===J?void 0:J.cuotas)-((null===J||void 0===J?void 0:J.cuotasPagadas)-(null===z||void 0===z?void 0:z.cuotas)),min:1,onChange:X,placeholder:"1"}),Object(Je.jsxs)("p",{children:["Cuotas restantes: ",(null===J||void 0===J?void 0:J.cuotas)-((null===J||void 0===J?void 0:J.cuotasPagadas)-(null===z||void 0===z?void 0:z.cuotas))]})]}),Object(Je.jsx)(Ut,{formValues:Q,isLoading:b,setIsLoading:j}),Object(Je.jsx)("textarea",{className:"textarea",name:"descripcion",value:Q.descripcion,onChange:X,placeholder:"Descripci\xf3n(opcional)"})]}),Object(Je.jsxs)("div",{className:"botones",children:[Object(Je.jsx)("button",{className:" btn boton-submit",disabled:!!b,type:"submit",children:"Guardar"}),Object(Je.jsx)("button",{onClick:n,className:"btn btn-secondary boton-cancel",children:"Cancelar"}),z&&Object(Je.jsx)("button",{onClick:function(e){var t;e.preventDefault(),window.confirm("\xbfSeguro que desea eliminar el evento? No podra recupararlo despues")&&(c((t={idReferencia:z.idReferencia,cantidadAnterior:parseInt(z.cantidad),cuotasAnterior:z.cuotas},function(){var e=Object(p.a)(m.a.mark((function e(a,n){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n().auth.uid,e.next=3,Object(O.e)(Object(O.b)(C,"".concat(c,"/app/movimientos")));case 3:e.sent.forEach((function(e){e.id===t.idReferencia&&a(Ge(Object(le.a)(Object(le.a)({},e.data()),{},{id:e.id,cantidadPagada:e.data().cantidadPagada-t.cantidadAnterior,cuotasPagadas:e.data().cuotasPagadas-t.cuotasAnterior,estado:e.data().cantidad-(e.data().cuotasPagadas-t.cuotasAnterior)>0?"pendiente":"saldado"})))}));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())),c(Be(z.id)),n(e),h.a.fire("Eliminado","Movimiento eliminado correctamente","success"))},className:" btn btn-danger boton-eliminar",children:"Eliminar"})]})]})})},qt=function(e){var t=e.modo,a=e.handleClose;return Object(Je.jsx)(Je.Fragment,{children:"solo ver"===t?Object(Je.jsx)(Ht,{}):Object(Je.jsx)($t,{handleClose:a})})},Qt=function(){var e=Object(r.c)((function(e){return e.movs.activeMov})),t=e.cantidad,a=e.categoria,n=e.cuenta,c=e.subcuenta,o=e.fecha,s=e.descripcion,i=e.deQuien,u=e.url;return Object(Je.jsxs)("div",{className:"detalle__form",children:[Object(Je.jsx)("h1",{children:"Detalle ingreso"}),Object(Je.jsxs)("section",{className:"detalle__section",children:[Object(Je.jsxs)("h4",{children:["Tipo: ",Object(Je.jsx)("span",{children:" Ingreso "})]}),Object(Je.jsxs)("h4",{children:["Fecha: ",Object(Je.jsx)("span",{children:new Date(o).toLocaleDateString()})]}),Object(Je.jsxs)("h4",{children:["Cantidad: ",Object(Je.jsxs)("span",{children:["$ ",Math.abs(t)]})]}),Object(Je.jsxs)("h4",{children:["Cuenta acreditada: ",Object(Je.jsx)("span",{children:n})]}),Object(Je.jsxs)("h4",{children:["Subcuenta: ",Object(Je.jsx)("span",{children:c})]}),Object(Je.jsxs)("h4",{children:["Motivo: ",Object(Je.jsx)("span",{children:a})]}),i&&Object(Je.jsxs)("h4",{children:["Cobro a: ",Object(Je.jsx)("span",{children:i})]}),u&&Object(Je.jsxs)("h4",{children:["Comprobante: ",Object(Je.jsx)("a",{href:u,target:"_blank",rel:"noreferrer",children:"Ver comprobante"})]}),Object(Je.jsxs)("h4",{children:["Descripcion: ",Object(Je.jsx)("span",{children:s})]})]})]})},Xt=function(e){var t=e.modo,a=e.handleClose;return Object(Je.jsx)(Je.Fragment,{children:"solo ver"===t?Object(Je.jsx)(Qt,{}):Object(Je.jsx)($t,{handleClose:a})})},Yt=function(e){var t,a=e.handleClose,n=Object(r.b)(),c=Object(r.c)((function(e){return e.cuentas})).cuentas,i=Object(s.useState)(""),u=Object(o.a)(i,2),l=u[0],d=u[1],b=Object(s.useState)(""),j=Object(o.a)(b,2),m=j[0],p=j[1],v=Object(s.useState)(!1),O=Object(o.a)(v,2),f=O[0],x=O[1],g=Object(s.useState)(!1),C=Object(o.a)(g,2),N=C[0],y=C[1],S=Lt(),_=S.activeMov,k=S.nombreCuentas,A=Ze(_||{fecha:Date.now(),cuenta:k[0],subcuenta:c.find((function(e){return e.nombre===k[0]})).subcuentas[0],cantidad:0,cantidadPagada:0,tipo:"deudaACobrar",tomador:"",cuotas:1,cuotasPagadas:0,descripcion:"",estado:"pendiente"}),w=Object(o.a)(A,3),F=w[0],P=w[1],E=w[2];return t="nuevaCuenta"===F.cuenta?"-":c.find((function(e){return e.nombre===F.cuenta})).subcuentas,Object(Je.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=Tt(F);if(t.ok){if("nuevaCuenta"===F.cuenta){var r=Tt({nuevaCuenta:l,nuevaSubcuenta:m});if(!r.ok)return void x(r.msg);F.cuenta=l,F.subcuenta=m,n(Ce({nombre:l,subcuentas:[m]}))}if("nuevaCuenta"!==F.cuenta&&"nuevaSubcuenta"===F.subcuenta){var o=Tt(m);if(!o.ok)return void x(o.msg);F.subcuenta=m,n(ye({id:c.find((function(e){return e.nombre===F.cuenta})).id,nombre:F.cuenta,subcuentas:[].concat(Object(Et.a)(c.find((function(e){return e.nombre===F.cuenta})).subcuentas),[m])}))}_?(n(ze(F)),h.a.fire("Nueva edici\xf3n","Movimiento editado correctamente","success")):(n(De(Object(le.a)({},F),"nuevoPrestamo")),h.a.fire("Nueva deuda a cobrar","Movimiento creado correctamente","success")),a(e)}else x(t.msg)},children:[Object(Je.jsxs)("div",{className:"form-container",children:[Object(Je.jsx)("h1",{children:_?"Editar movimiento":"Nueva deuda a cobrar"}),f&&Object(Je.jsx)("div",{className:"msg-error",children:f}),Object(Je.jsx)(It.a,{onChange:E,value:F.fecha,name:"fecha",format:"dd-MM-y",className:"calendar"}),Object(Je.jsxs)("div",{className:"modal__section",children:[Object(Je.jsx)("label",{htmlFor:"tomador",children:"Tomador: "}),Object(Je.jsx)("div",{className:"tomador",children:Object(Je.jsx)("input",{type:"text",name:"tomador",value:F.tomador,onChange:P,placeholder:"Nombre del tomador"})})]}),Object(Je.jsxs)("div",{className:"modal__section cuenta-principal",children:[Object(Je.jsx)("label",{htmlFor:"cuenta",children:"Cuenta: "}),Object(Je.jsxs)("select",{name:"cuenta",value:F.cuenta,onChange:P,children:[k.map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)})),Object(Je.jsx)("option",{value:"nuevaCuenta",children:"...nueva cuenta"})]}),"nuevaCuenta"===F.cuenta&&Object(Je.jsx)("input",{value:l,onChange:function(e){return d(e.target.value)},autoFocus:!0,type:"text",placeholder:"Nueva cuenta"})]}),Object(Je.jsxs)("div",{className:"modal__section cuenta-secundaria",children:[Object(Je.jsx)("label",{htmlFor:"subcuenta",children:"Subcuenta: "}),Object(Je.jsxs)("select",{name:"subcuenta",value:F.subcuenta,onChange:P,children:[Object(Je.jsx)("option",{value:"-",children:"-"}),"nuevaCuenta"!==F.cuenta&&t.map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)})),Object(Je.jsx)("option",{value:"nuevaSubcuenta",children:"...nueva subcuenta"})]}),"nuevaSubcuenta"===F.subcuenta&&Object(Je.jsx)("input",{value:m,onChange:function(e){return p(e.target.value)},autoFocus:!0,type:"text",placeholder:"Nueva subcuenta"})]}),Object(Je.jsxs)("div",{className:"modal__section ",children:[Object(Je.jsx)("label",{htmlFor:"cantidad",children:"Cantidad: "}),Object(Je.jsxs)("div",{className:"cantidad",children:["$",Object(Je.jsx)("input",{type:"number",name:"cantidad",value:F.cantidad,onChange:P,placeholder:"5000",min:0,step:1e-7})]})]}),Object(Je.jsxs)("div",{className:"modal__section ",children:[Object(Je.jsx)("label",{htmlFor:"cuotas",children:"Cuotas: "}),Object(Je.jsx)("input",{type:"number",name:"cuotas",value:F.cuotas,onChange:P,placeholder:"1",min:1})]}),Object(Je.jsx)(Ut,{formValues:F,isLoading:N,setIsLoading:y}),Object(Je.jsx)("textarea",{className:"textarea",name:"descripcion",value:F.descripcion,onChange:P,placeholder:"Descripci\xf3n(opcional)"})]}),Object(Je.jsxs)("div",{className:"botones",children:[Object(Je.jsx)("button",{className:" btn boton-submit",disabled:!!N,type:"submit",children:"Guardar"}),Object(Je.jsx)("button",{onClick:a,className:"btn btn-secondary boton-cancel",children:"Cancelar"}),_&&Object(Je.jsx)("button",{onClick:function(e){e.preventDefault(),window.confirm("\xbfSeguro que desea eliminar el evento? No podra recupararlo despues")&&(n(Be(_.id)),a(e),h.a.fire("Eliminado","Movimiento eliminado correctamente","success"))},className:" btn btn-danger boton-eliminar",children:"Eliminar"})]})]})},Zt=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.movs})).activeMov,a=t.cantidad,n=t.cuenta,c=t.subcuenta,o=t.prestador,s=t.tomador,i=t.fecha,u=t.descripcion,l=t.estado,d=t.cantidadPagada,b=t.cuotas,j=t.cuotasPagadas,m=t.tipo,p=t.url;return Object(Je.jsxs)("div",{className:"detalle__form",children:["prestamo"===m?Object(Je.jsx)("h1",{children:"Detalle prestamo"}):Object(Je.jsx)("h1",{children:"Detalle deuda a cobrar"}),Object(Je.jsxs)("section",{className:"detalle__section",children:[Object(Je.jsxs)("h4",{children:["Tipo: ",Object(Je.jsx)("span",{children:"prestamo"===m?"Prestamo":"Deuda a cobrar"})]}),Object(Je.jsxs)("h4",{children:["Fecha: ",Object(Je.jsx)("span",{children:i.toLocaleDateString()})]}),Object(Je.jsxs)("h4",{children:["Cantidad total: ",Object(Je.jsxs)("span",{children:["$ ",Math.abs(a)]})]}),Object(Je.jsxs)("h4",{children:["Cantidad abonada: ",Object(Je.jsxs)("span",{children:["$ ",d]})]}),Object(Je.jsxs)("h4",{children:["Cantidad restante: ",Object(Je.jsxs)("span",{children:["$ ",Math.abs(a)-d]})]}),o?Object(Je.jsxs)("h4",{children:["Prestador: ",Object(Je.jsx)("span",{children:o})]}):Object(Je.jsxs)("h4",{children:["Tomador: ",Object(Je.jsx)("span",{children:s})]}),Object(Je.jsxs)("h4",{children:["Cuenta: ",Object(Je.jsx)("span",{children:n})]}),Object(Je.jsxs)("h4",{children:["Subcuenta: ",Object(Je.jsx)("span",{children:c})]}),Object(Je.jsxs)("h4",{children:["Cuotas abonadas: ",Object(Je.jsxs)("span",{children:[j,"/",b]})]}),p&&Object(Je.jsxs)("h4",{children:["Comprobante: ",Object(Je.jsx)("a",{href:p,target:"_blank",rel:"noreferrer",children:"Ver comprobante"})]}),Object(Je.jsxs)("h4",{children:["Descripcion: ",Object(Je.jsx)("span",{children:u})]}),Object(Je.jsxs)("h4",{children:["Estado: ",Object(Je.jsx)("span",{children:l})]})]}),"pendiente"===l&&Object(Je.jsx)("button",{onClick:function(t){t.preventDefault(),e(tt({tipo:"saldar prestamo",title:m}))},className:"btn boton-saldar",children:"Saldar cuota"})]})},Jt=function(e){var t,a,n,c=e.handleClose,i=e.typeModal,u=Object(r.b)(),l=Object(r.c)((function(e){return e.cuentas})).cuentas,d=Object(s.useState)(""),b=Object(o.a)(d,2),j=b[0],m=b[1],p=Object(s.useState)(""),v=Object(o.a)(p,2),O=v[0],f=v[1],x=Object(s.useState)(!1),g=Object(o.a)(x,2),C=g[0],N=g[1],y=Object(s.useState)(!1),S=Object(o.a)(y,2),_=S[0],k=S[1],A=Lt(),w=A.activeMov,F=A.nombreCuentas,P=Ze(w||{fecha:Date.now(),cuenta:F[0],subcuenta:null===(t=l.find((function(e){return e.nombre===F[0]})))||void 0===t?void 0:t.subcuentas[0],cantidad:0,cantidadPagada:0,tipo:i,prestador:"",cuotas:1,cuotasPagadas:0,descripcion:"",estado:"pendiente"}),E=Object(o.a)(P,3),D=E[0],I=E[1],M=E[2];return n="nuevaCuenta"===D.cuenta?"-":null===(a=l.find((function(e){return e.nombre===D.cuenta})))||void 0===a?void 0:a.subcuentas,Object(Je.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=Tt(D);if(t.ok){if("nuevaCuenta"===D.cuenta){var a=Tt({nuevaCuenta:j,nuevaSubcuenta:O});if(!a.ok)return void N(a.msg);D.cuenta=j,D.subcuenta=O,u(Ce({nombre:j,subcuentas:[O]}))}if("nuevaCuenta"!==D.cuenta&&"nuevaSubcuenta"===D.subcuenta){var n=Tt(O);if(!n.ok)return void N(n.msg);D.subcuenta=O,u(ye({id:l.find((function(e){return e.nombre===D.cuenta})).id,nombre:D.cuenta,subcuentas:[].concat(Object(Et.a)(l.find((function(e){return e.nombre===D.cuenta})).subcuentas),[O])}))}w?(u(ze(D)),h.a.fire("Nueva edici\xf3n","Movimiento editado correctamente","success")):(u(De(Object(le.a)(Object(le.a)({},D),{},{id:Date.now()}),"nuevoPrestamo")),h.a.fire("Nueva prestamo","Movimiento creado correctamente","success")),c(e)}else N(t.msg)},children:[Object(Je.jsxs)("div",{className:"form-container",children:[Object(Je.jsx)("h1",{children:w?"Editar movimiento":"Nuevo Prestamo"}),C&&Object(Je.jsx)("div",{className:"msg-error",children:C}),Object(Je.jsx)(It.a,{onChange:M,value:D.fecha,name:"fecha",format:"dd-MM-y",className:"calendar"}),Object(Je.jsxs)("div",{className:"modal__section",children:[Object(Je.jsx)("label",{htmlFor:"prestador",children:"Prestador: "}),Object(Je.jsx)("div",{className:"prestador",children:Object(Je.jsx)("input",{type:"text",name:"prestador",value:D.prestador,onChange:I,placeholder:"Nombre del prestador"})})]}),Object(Je.jsxs)("div",{className:"modal__section cuenta-principal",children:[Object(Je.jsx)("label",{htmlFor:"cuenta",children:"Cuenta: "}),Object(Je.jsxs)("select",{name:"cuenta",value:D.cuenta,onChange:I,children:[F.map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)})),Object(Je.jsx)("option",{value:"nuevaCuenta",children:"...nueva cuenta"})]}),"nuevaCuenta"===D.cuenta&&Object(Je.jsx)("input",{value:j,onChange:function(e){return m(e.target.value)},autoFocus:!0,type:"text",placeholder:"Nueva cuenta"})]}),Object(Je.jsxs)("div",{className:"modal__section cuenta-secundaria",children:[Object(Je.jsx)("label",{htmlFor:"subcuenta",children:"Subcuenta: "}),Object(Je.jsxs)("select",{name:"subcuenta",value:D.subcuenta,onChange:I,children:[Object(Je.jsx)("option",{value:"-",children:"-"}),"nuevaCuenta"!==D.cuenta&&n.map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)})),Object(Je.jsx)("option",{value:"nuevaSubcuenta",children:"...nueva subcuenta"})]}),"nuevaSubcuenta"===D.subcuenta&&Object(Je.jsx)("input",{value:O,onChange:function(e){return f(e.target.value)},autoFocus:!0,type:"text",placeholder:"Nueva subcuenta"})]}),Object(Je.jsxs)("div",{className:"modal__section ",children:[Object(Je.jsx)("label",{htmlFor:"cantidad",children:"Cantidad: "}),Object(Je.jsxs)("div",{className:"cantidad",children:["$",Object(Je.jsx)("input",{type:"number",name:"cantidad",value:D.cantidad,onChange:I,placeholder:"1000",min:0,step:1e-7})]})]}),Object(Je.jsxs)("div",{className:"modal__section ",children:[Object(Je.jsx)("label",{htmlFor:"cuotas",children:"Cuotas: "}),Object(Je.jsx)("input",{type:"number",name:"cuotas",value:D.cuotas,onChange:I,placeholder:"1",min:1})]}),Object(Je.jsx)(Ut,{formValues:D,isLoading:_,setIsLoading:k}),Object(Je.jsx)("textarea",{className:"textarea",name:"descripcion",value:D.descripcion,onChange:I,placeholder:"Descripci\xf3n(opcional)"})]}),Object(Je.jsxs)("div",{className:"botones",children:[Object(Je.jsx)("button",{className:"btn boton-submit",disabled:!!_,type:"submit",children:"Guardar"}),Object(Je.jsx)("button",{onClick:c,className:"btn btn-secondary boton-cancel",children:"Cancelar"}),w&&Object(Je.jsx)("button",{onClick:function(e){e.preventDefault(),window.confirm("\xbfSeguro que desea eliminar el evento? No podra recupararlo despues")&&(u(Be(w.id)),c(e),h.a.fire("Eliminado","Movimiento eliminado correctamente","success"))},className:" btn btn-danger boton-eliminar",children:"Eliminar"})]})]})},Kt=function(e){var t=e.modo,a=e.handleClose,n=e.typeModal;return Object(Je.jsxs)(Je.Fragment,{children:["prestamo"===n&&("solo ver"===t?Object(Je.jsx)(Zt,{}):Object(Je.jsx)(Jt,{handleClose:a,typeModal:n})),"deudaACobrar"===n&&("solo ver"===t?Object(Je.jsx)(Zt,{}):Object(Je.jsx)(Yt,{handleClose:a}))]})},Wt=function(e){var t,a,n=e.handleClose,c=e.handleSubmit,r=e.handleDelete,o=e.activeMov,s=e.nombreCuentas,i=e.msgForm,u=e.handleChangeCalendar,l=e.formValues,d=e.handleChangeFrom,b=e.cuentas,j=e.handleChangeTo,m=e.nuevaCuentaFrom,p=e.setNuevaCuentaFrom,v=e.nuevaSubcuentaFrom,h=e.setNuevaSubcuentaFrom,O=e.nuevaSubcuentaTo,f=e.setNuevaSubcuentaTo,x=e.handleChange,g=e.isLoading,C=e.setIsLoading;return l.to.cuenta="Activos",l.tipo="compraActivos",t="nuevaCuenta"===l.to.cuenta?"-":b.find((function(e){return e.nombre===l.to.cuenta})).subcuentas,a="nuevaCuenta"===l.from.cuenta?"-":b.find((function(e){return e.nombre===l.from.cuenta})).subcuentas,Object(Je.jsxs)("form",{onSubmit:c,className:"form__transferencia",children:[Object(Je.jsxs)("div",{className:"form-container",children:[Object(Je.jsx)("h1",{children:o?"Editar movimiento":"Comprar activo"}),i&&Object(Je.jsx)("div",{className:"msg-error",children:i}),Object(Je.jsx)(It.a,{onChange:u,value:l.fecha,name:"fecha",format:"dd-MM-y",className:"calendar"}),Object(Je.jsxs)("div",{className:"modal__section cuenta-principal",children:[Object(Je.jsx)("label",{htmlFor:"cuenta",children:"Con cuenta: "}),Object(Je.jsxs)("select",{name:"cuenta",value:l.from.cuenta,onChange:d,children:[s.filter((function(e){return"Activos"!==e})).map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)})),Object(Je.jsx)("option",{value:"nuevaCuenta",children:"...nueva cuenta"})]}),"nuevaCuenta"===l.from.cuenta&&Object(Je.jsx)("input",{value:m,onChange:function(e){return p(e.target.value)},autoFocus:!0,type:"text",placeholder:"Nueva cuenta"})]}),Object(Je.jsxs)("div",{className:"modal__section cuenta-secundaria",children:[Object(Je.jsx)("label",{htmlFor:"subcuenta",children:"Subcuenta: "}),Object(Je.jsxs)("select",{name:"subcuenta",value:l.from.subcuenta,onChange:d,children:[Object(Je.jsx)("option",{value:"-",children:"-"}),"nuevaCuenta"!==l.from.cuenta&&a.map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)})),Object(Je.jsx)("option",{value:"nuevaSubcuenta",children:"...nueva subcuenta"})]}),"nuevaSubcuenta"===l.from.subcuenta&&Object(Je.jsx)("input",{value:v,onChange:function(e){return h(e.target.value)},autoFocus:!0,type:"text",placeholder:"Nueva subcuenta"})]}),Object(Je.jsx)("hr",{}),Object(Je.jsxs)("div",{className:"modal__section cuenta-secundaria",children:[Object(Je.jsx)("label",{htmlFor:"subcuenta",children:"Activo a comprar: "}),Object(Je.jsxs)("select",{name:"subcuenta",value:l.to.subcuenta,onChange:j,children:[Object(Je.jsx)("option",{value:"-",children:"-"}),"nuevaCuenta"!==l.to.cuenta&&t.map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)})),Object(Je.jsx)("option",{value:"nuevaSubcuenta",children:"...nueva subcuenta"})]}),"nuevaSubcuenta"===l.to.subcuenta&&Object(Je.jsx)("input",{value:O,onChange:function(e){return f(e.target.value)},autoFocus:!0,type:"text",placeholder:"Nueva subcuenta"})]}),Object(Je.jsxs)("div",{className:"modal__section cantidad",children:[Object(Je.jsx)("label",{htmlFor:"cantidad",children:"Cantidad: "}),Object(Je.jsxs)("div",{className:"cantidad",children:["$",Object(Je.jsx)("input",{type:"number",name:"cantidad",value:l.cantidad,onChange:x,placeholder:"1000",min:0,step:1e-7})]})]}),Object(Je.jsx)(Ut,{formValues:l,isLoading:g,setIsLoading:C}),Object(Je.jsx)("textarea",{className:"textarea",name:"descripcion",value:l.descripcion,onChange:x,placeholder:"Descripci\xf3n(opcional)"})]}),Object(Je.jsxs)("div",{className:"botones",children:[Object(Je.jsx)("button",{className:" btn boton-submit",disabled:!!g,type:"submit",children:"Guardar"}),Object(Je.jsx)("button",{onClick:n,className:"btn btn-secondary boton-cancel",children:"Cancelar"}),o&&Object(Je.jsx)("button",{onClick:r,className:" btn btn-danger boton-eliminar",children:"Eliminar"})]})]})},ea=function(e){var t,a,n=e.handleClose,c=e.handleSubmit,r=e.handleDelete,o=e.activeMov,s=e.nombreCuentas,i=e.msgForm,u=e.handleChangeCalendar,l=e.formValues,d=e.handleChangeFrom,b=e.handleChangeTo,j=e.cuentas,m=e.nuevaCuentaTo,p=e.setNuevaCuentaTo,v=e.nuevaSubcuentaTo,h=e.setNuevaSubcuentaTo,O=e.handleChange,f=e.isLoading,x=e.setIsLoading;return l.from.cuenta="Activos",l.tipo="ventaActivos",t="nuevaCuenta"===l.from.cuenta?"-":j.find((function(e){return e.nombre===l.from.cuenta})).subcuentas,a="nuevaCuenta"===l.to.cuenta?"-":j.find((function(e){return e.nombre===l.to.cuenta})).subcuentas,Object(Je.jsxs)("form",{onSubmit:c,className:"form__transferencia",children:[Object(Je.jsxs)("div",{className:"form-container",children:[Object(Je.jsx)("h1",{children:o?"Editar movimiento":"Vender activo"}),i&&Object(Je.jsx)("div",{className:"msg-error",children:i}),Object(Je.jsx)(It.a,{onChange:u,value:l.fecha,name:"fecha",format:"dd-MM-y",className:"calendar"}),Object(Je.jsxs)("div",{className:"modal__section cuenta-secundaria",children:[Object(Je.jsx)("label",{htmlFor:"subcuenta",children:"Activo a vender: "}),Object(Je.jsxs)("select",{name:"subcuenta",value:l.from.subcuenta,onChange:d,children:[Object(Je.jsx)("option",{value:"-",children:"-"}),"nuevaCuenta"!==l.from.cuenta&&t.map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)}))]})]}),Object(Je.jsx)("hr",{}),Object(Je.jsxs)("div",{className:"modal__section cuenta-principal",children:[Object(Je.jsx)("label",{htmlFor:"cuenta",children:"En que moneda se cobra: "}),Object(Je.jsxs)("select",{name:"cuenta",value:l.to.cuenta,onChange:b,children:[s.map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)})),Object(Je.jsx)("option",{value:"nuevaCuenta",children:"...nueva cuenta"})]}),"nuevaCuenta"===l.to.cuenta&&Object(Je.jsx)("input",{value:m,onChange:function(e){return p(e.target.value)},autoFocus:!0,type:"text",placeholder:"Nueva cuenta"})]}),Object(Je.jsxs)("div",{className:"modal__section cuenta-secundaria",children:[Object(Je.jsx)("label",{htmlFor:"subcuenta",children:"Subcuenta: "}),Object(Je.jsxs)("select",{name:"subcuenta",value:l.to.subcuenta,onChange:b,children:[Object(Je.jsx)("option",{value:"-",children:"-"}),"nuevaCuenta"!==l.to.cuenta&&a.map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)})),Object(Je.jsx)("option",{value:"nuevaSubcuenta",children:"...nueva subcuenta"})]}),"nuevaSubcuenta"===l.to.subcuenta&&Object(Je.jsx)("input",{value:v,onChange:function(e){return h(e.target.value)},autoFocus:!0,type:"text",placeholder:"Nueva subcuenta"})]}),Object(Je.jsxs)("div",{className:"modal__section cantidad",children:[Object(Je.jsx)("label",{htmlFor:"cantidad",children:"Cantidad: "}),Object(Je.jsxs)("div",{className:"cantidad",children:["$",Object(Je.jsx)("input",{type:"number",name:"cantidad",value:l.cantidad,onChange:O,placeholder:"1000",min:0,step:1e-7})]})]}),Object(Je.jsx)(Ut,{formValues:l,isLoading:f,setIsLoading:x}),Object(Je.jsx)("textarea",{className:"textarea",name:"descripcion",value:l.descripcion,onChange:O,placeholder:"Descripci\xf3n(opcional)"})]}),Object(Je.jsxs)("div",{className:"botones",children:[Object(Je.jsx)("button",{className:" btn boton-submit",disabled:!!f,type:"submit",children:"Guardar"}),Object(Je.jsx)("button",{onClick:n,className:"btn btn-secondary boton-cancel",children:"Cancelar"}),o&&Object(Je.jsx)("button",{onClick:r,className:" btn btn-danger boton-eliminar",children:"Eliminar"})]})]})},ta=function(){var e=Object(r.c)((function(e){return e.movs.activeMov})),t=e.cantidad,a=e.from,n=e.to,c=e.fecha,o=e.descripcion,s=e.url;return Object(Je.jsxs)("div",{className:"detalle__form",children:[Object(Je.jsx)("h1",{children:"Detalle transferencia"}),Object(Je.jsxs)("section",{className:"detalle__section",children:[Object(Je.jsxs)("h4",{children:["Tipo: ",Object(Je.jsx)("span",{children:" Transferencia "})]}),Object(Je.jsxs)("h4",{children:["Fecha: ",Object(Je.jsx)("span",{children:c.toLocaleDateString()})]}),Object(Je.jsxs)("h4",{children:["Cantidad: ",Object(Je.jsxs)("span",{children:["$ ",Math.abs(t)]})]}),Object(Je.jsxs)("h4",{children:["Desde cuenta: ",Object(Je.jsxs)("span",{children:[a.subcuenta," (",a.cuenta,")"]})]}),Object(Je.jsxs)("h4",{children:["A cuenta: ",Object(Je.jsxs)("span",{children:[n.subcuenta," (",n.cuenta,")"]})]}),s&&Object(Je.jsxs)("h4",{children:["Comprobante: ",Object(Je.jsx)("a",{href:s,target:"_blank",rel:"noreferrer",children:"Ver comprobante"})]}),Object(Je.jsxs)("h4",{children:["Descripcion: ",Object(Je.jsx)("span",{children:o})]})]})]})},aa=function(e){var t,a,n=e.handleClose,c=e.handleSubmit,r=e.handleDelete,o=e.activeMov,s=e.nombreCuentas,i=e.msgForm,u=e.handleChangeCalendar,l=e.formValues,d=e.handleChangeFrom,b=e.handleChangeTo,j=e.cuentas,m=e.nuevaCuentaTo,p=e.setNuevaCuentaTo,v=e.nuevaSubcuentaTo,h=e.setNuevaSubcuentaTo,O=e.handleChange,f=e.isLoading,x=e.setIsLoading;return l.tipo="transferencia",t="nuevaCuenta"===l.to.cuenta?"-":j.find((function(e){return e.nombre===l.to.cuenta})).subcuentas,a="nuevaCuenta"===l.from.cuenta?"-":j.find((function(e){return e.nombre===l.from.cuenta})).subcuentas,Object(Je.jsxs)("form",{onSubmit:c,className:"form__transferencia",children:[Object(Je.jsxs)("div",{className:"form-container",children:[Object(Je.jsx)("h1",{children:o?"Editar movimiento":"Nueva transferencia"}),i&&Object(Je.jsx)("div",{className:"msg-error",children:i}),Object(Je.jsx)(It.a,{onChange:u,value:l.fecha,name:"fecha",format:"dd-MM-y",className:"calendar"}),Object(Je.jsxs)("div",{className:"modal__section cuenta-principal",children:[Object(Je.jsx)("label",{htmlFor:"cuenta",children:"Desde cuenta: "}),Object(Je.jsx)("select",{name:"cuenta",value:l.from.cuenta,onChange:d,children:s.map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)}))})]}),Object(Je.jsxs)("div",{className:"modal__section cuenta-secundaria",children:[Object(Je.jsx)("label",{htmlFor:"subcuenta",children:"Subcuenta: "}),Object(Je.jsxs)("select",{name:"subcuenta",value:l.from.subcuenta,onChange:d,children:[Object(Je.jsx)("option",{value:"-",children:"-"}),"nuevaCuenta"!==l.from.cuenta&&a.map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)}))]})]}),Object(Je.jsx)("hr",{}),Object(Je.jsxs)("div",{className:"modal__section cuenta-principal",children:[Object(Je.jsx)("label",{htmlFor:"cuenta",children:"A cuenta: "}),Object(Je.jsxs)("select",{name:"cuenta",value:l.to.cuenta,onChange:b,children:[s.map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)})),Object(Je.jsx)("option",{value:"nuevaCuenta",children:"...nueva cuenta"})]}),"nuevaCuenta"===l.to.cuenta&&Object(Je.jsx)("input",{value:m,onChange:function(e){return p(e.target.value)},autoFocus:!0,type:"text",placeholder:"Nueva cuenta"})]}),Object(Je.jsxs)("div",{className:"modal__section cuenta-secundaria",children:[Object(Je.jsx)("label",{htmlFor:"subcuenta",children:"Subcuenta: "}),Object(Je.jsxs)("select",{name:"subcuenta",value:l.to.subcuenta,onChange:b,children:[Object(Je.jsx)("option",{value:"-",children:"-"}),"nuevaCuenta"!==l.to.cuenta&&t.map((function(e){return Object(Je.jsx)("option",{value:e,children:e},e)})),Object(Je.jsx)("option",{value:"nuevaSubcuenta",children:"...nueva subcuenta"})]}),"nuevaSubcuenta"===l.to.subcuenta&&Object(Je.jsx)("input",{value:v,onChange:function(e){return h(e.target.value)},autoFocus:!0,type:"text",placeholder:"Nueva subcuenta"})]}),Object(Je.jsxs)("div",{className:"modal__section cantidad",children:[Object(Je.jsx)("label",{htmlFor:"cantidad",children:"Cantidad: "}),Object(Je.jsxs)("div",{className:"cantidad",children:["$",Object(Je.jsx)("input",{type:"number",name:"cantidad",value:l.cantidad,onChange:O,placeholder:"1000",min:0,step:1e-7})]})]}),Object(Je.jsx)(Ut,{formValues:l,isLoading:f,setIsLoading:x}),Object(Je.jsx)("textarea",{className:"textarea",name:"descripcion",value:l.descripcion,onChange:O,placeholder:"Descripci\xf3n(opcional)"})]}),Object(Je.jsxs)("div",{className:"botones",children:[Object(Je.jsx)("button",{className:" btn boton-submit",disabled:!!f,type:"submit",children:"Guardar"}),Object(Je.jsx)("button",{onClick:n,className:"btn btn-secondary boton-cancel",children:"Cancelar"}),o&&Object(Je.jsx)("button",{onClick:r,className:" btn btn-danger boton-eliminar",children:"Eliminar"})]})]})},na=function(e){var t=e.handleClose,a=e.modo,n=e.typeModal,c=Object(r.b)(),i=Object(s.useState)(!1),u=Object(o.a)(i,2),l=u[0],d=u[1],b=Object(s.useState)(""),j=Object(o.a)(b,2),m=j[0],p=j[1],v=Object(s.useState)(""),O=Object(o.a)(v,2),f=O[0],x=O[1],g=Object(s.useState)(""),C=Object(o.a)(g,2),N=C[0],y=C[1],S=Object(s.useState)(""),_=Object(o.a)(S,2),k=_[0],A=_[1],w=Object(s.useState)(!1),F=Object(o.a)(w,2),P=F[0],E=F[1],D=Object(r.c)((function(e){return e.cuentas})).cuentas,I=Object(r.c)((function(e){return e.cats})).categorias,M=Lt(),T=M.nombreCuentas,L=M.activeMov,V=M.movs,U=Ze(L||{fecha:Date.now(),from:{cuenta:T[0],subcuenta:"-"},to:{cuenta:T[1],subcuenta:"-"},cantidad:0,descripcion:"",tipo:"",url:""}),R=Object(o.a)(U,5),z=R[0],G=R[1],B=R[2],H=R[3],$=R[4],q=function(e){e.preventDefault();var a=Tt(z);if(a.ok){if("nuevaCuenta"===z.to.cuenta){if(!Tt({nuevaCuenta:f,nuevaSubcuenta:k}).ok)return void E("Nuevos nombres de cuentas no v\xe1lidos");z.to.cuenta=f,z.to.subcuenta=k,c(Ce({nombre:f,subcuentas:[k]}))}if("nuevaCuenta"===z.from.cuenta){if(!Tt({nuevaCuenta:m,nuevaSubcuenta:N}).ok)return void E("Nuevos nombres de cuentas no v\xe1lidos");z.from.cuenta=m,z.from.subcuenta=N,c(Ce({nombre:m,subcuentas:[N]}))}if("nuevaCuenta"!==z.to.cuenta&&"nuevaSubcuenta"===z.to.subcuenta){if(!Tt(k).ok)return void E("Nuevos nombres de cuentas no v\xe1lidos");z.to.subcuenta=k,c(ye({id:D.find((function(e){return e.nombre===z.cuenta})).id,nombre:z.to.cuenta,subcuentas:[].concat(Object(Et.a)(D.find((function(e){return e.nombre===z.to.cuenta})).subcuentas),[k])}))}if("nuevaCuenta"!==z.from.cuenta&&"nuevaSubcuenta"===z.from.subcuenta){if(!Tt(N).ok)return void E("Nuevos nombres de cuentas no v\xe1lidos");z.from.subcuenta=N,c(ye({id:D.find((function(e){return e.nombre===z.cuenta})).id,nombre:z.from.cuenta,subcuentas:[].concat(Object(Et.a)(D.find((function(e){return e.nombre===z.from.cuenta})).subcuentas),[N])}))}if(L)c(ze(z)),h.a.fire("Nueva edici\xf3n","Movimiento editado correctamente","success");else{if("ventaActivos"===z.tipo){var n=dt(V,D,z.from.cuenta).find((function(e){return e.subcuenta===z.from.subcuenta})).cantidad,r=n-parseInt(z.cantidad);r<0&&(I.find((function(e){return"Ganancia por ventas"===e.nombre}))||c(me({nombre:"Ganancia por ventas",tipo:"ingreso",sector:"ventas"})),z.cantidad=n,c(De({id:Date.now(),cantidad:Math.abs(r),tipo:"ingreso",categoria:"Ganancia por ventas",cuenta:z.to.cuenta,subcuenta:z.to.subcuenta,fecha:Date.now(),comprobante:z.url,descripcion:"Venta de ".concat(z.from.subcuenta)},"nuevoIngreso")))}c(De(Object(le.a)({},z),"nuevaTransferencia")),h.a.fire("Nuevo movimiento","Movimiento creado correctamente","success")}t(e)}else E(a.msg)},Q=function(e){e.preventDefault(),window.confirm("\xbfSeguro que desea eliminar el evento? No podra recupararlo despues")&&(c(Be(L.id)),t(e),h.a.fire("Eliminado","Movimiento eliminado correctamente","success"))};return Object(Je.jsxs)(Je.Fragment,{children:["solo ver"===a&&Object(Je.jsx)(ta,{}),"transferencia"===n&&("crear"===a||"editar"===a)&&Object(Je.jsx)(aa,{handleClose:t,handleSubmit:q,handleDelete:Q,activeMov:L,cuentas:D,nombreCuentas:T,msgForm:P,handleChangeCalendar:B,formValues:z,handleChangeFrom:H,handleChangeTo:$,nuevaCuentaTo:f,setNuevaCuentaTo:x,nuevaSubcuentaTo:k,setNuevaSubcuentaTo:A,handleChange:G,isLoading:l,setIsLoading:d}),"compraActivos"===n&&("crear"===a||"editar"===a)&&Object(Je.jsx)(Wt,{handleClose:t,handleSubmit:q,handleDelete:Q,activeMov:L,cuentas:D,nombreCuentas:T,msgForm:P,handleChangeCalendar:B,formValues:z,handleChangeFrom:H,handleChangeTo:$,nuevaCuentaFrom:m,setNuevaCuentaFrom:p,nuevaSubcuentaFrom:N,setNuevaSubcuentaFrom:y,nuevaSubcuentaTo:k,setNuevaSubcuentaTo:A,handleChange:G,isLoading:l,setIsLoading:d}),"ventaActivos"===n&&("crear"===a||"editar"===a)&&Object(Je.jsx)(ea,{handleClose:t,handleSubmit:q,handleDelete:Q,activeMov:L,cuentas:D,nombreCuentas:T,msgForm:P,handleChangeCalendar:B,formValues:z,handleChangeFrom:H,handleChangeTo:$,nuevaCuentaTo:f,setNuevaCuentaTo:x,nuevaSubcuentaTo:k,setNuevaSubcuentaTo:A,handleChange:G,isLoading:l,setIsLoading:d})]})},ca=function(e){var t=e.handleClose,a=e.activeCat,n=Object(r.c)((function(e){return e.cats})).categorias,c=Object(r.b)(),i=Object(s.useState)(!1),u=Object(o.a)(i,2),l=u[0],d=u[1],b=Object(s.useState)({id:a.id,tipo:a.tipo,nombre:"",sector:n.find((function(e){return e.nombre===a.catNombre})).sector}),j=Object(o.a)(b,2),v=j[0],f=j[1],x=function(e){f(Object(le.a)(Object(le.a)({},v),{},Object(Ye.a)({},e.target.name,e.target.value)))};return Object(Je.jsx)(Je.Fragment,{children:Object(Je.jsxs)("form",{className:"editar-categoria",onSubmit:function(e){e.preventDefault();var a,n=Tt({nuevaCategoria:v.nombre});n.ok?(c((a=v,function(){var e=Object(p.a)(m.a.mark((function e(t,n){var c,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=n().auth.uid,delete(r=Object(le.a)({},a)).id,e.next=6,Object(O.g)(Object(O.d)(C,"".concat(c,"/app/categorias/").concat(a.id)),r);case 6:t(ve(a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}())),c(function(e){return function(){var t=Object(p.a)(m.a.mark((function t(a,n){var c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n().auth.uid,t.next=3,Object(O.e)(Object(O.b)(C,"".concat(c,"/app/movimientos")));case 3:t.sent.forEach((function(t){t.data().categoria===e.categoriaActual&&a(ze(Object(le.a)(Object(le.a)({},t.data()),{},{id:t.id,categoria:e.nuevaCategoria})))}));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}(v)),t(e),h.a.fire("Nombre actualizado a "+v.nombre,"Categoria actualizada correctamente","success")):d(n.msg)},children:[Object(Je.jsxs)("div",{className:"form-container",children:[Object(Je.jsx)("h1",{children:"Editar Categoria"}),l&&Object(Je.jsx)("div",{className:"msg-error",children:l}),Object(Je.jsxs)("section",{className:"modal__section",children:[Object(Je.jsx)("label",{htmlFor:"categoriaActual",children:"Nombre actual: "}),Object(Je.jsx)("h4",{children:a.catNombre})]}),Object(Je.jsxs)("section",{className:"modal__section",children:[Object(Je.jsx)("label",{htmlFor:"nombre",children:"Nuevo nombre: "}),Object(Je.jsx)("input",{value:v.nombre,name:"nombre",onChange:x,type:"text",placeholder:"Nombre de la categoria"})]}),Object(Je.jsxs)("section",{className:"modal__section",children:[Object(Je.jsx)("label",{htmlFor:"sector",children:"Sector: "}),Object(Je.jsx)("input",{name:"sector",value:v.sector,onChange:x,type:"text",placeholder:"Nuevo sector"})]})]}),Object(Je.jsxs)("div",{className:"botones",children:[Object(Je.jsx)("button",{className:" btn boton-submit",type:"submit",children:"Guardar"}),Object(Je.jsx)("button",{onClick:t,className:"btn btn-secondary boton-cancel",children:"Cancelar"}),0===a.catCantidad&&Object(Je.jsx)("button",{onClick:function(e){var n;(e.preventDefault(),0===a.catCantidad)&&(window.confirm("\xbfEstas seguro que deseas eliminar la categoria ".concat(a.catNombre," ?"))&&(c((n=v,console.log(n),function(){var e=Object(p.a)(m.a.mark((function e(t,a){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=a().auth.uid,e.next=4,Object(O.c)(Object(O.d)(C,"".concat(c,"/app/categorias/").concat(n.id)));case 4:t(Oe(n)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}())),h.a.fire("Categoria eliminada","La categoria ".concat(a.catNombre," ha sido borrada exitosamente"),"success")));t(e)},className:"btn btn-danger boton-eliminar",children:"Eliminar"})]})]})})},ra=function(e){var t=e.handleClose,a=e.cantidad,n=Object(r.b)(),c=Object(s.useState)(!1),i=Object(o.a)(c,2),u=i[0],l=i[1],d=Object(r.c)((function(e){return e.cuentas})).activeCuenta,b=Object(s.useState)(Object(le.a)(Object(le.a)({},d),{},{nuevaCuenta:""})),j=Object(o.a)(b,2),v=j[0],f=j[1];return Object(Je.jsx)(Je.Fragment,{children:Object(Je.jsxs)("form",{className:"editar-cuenta",onSubmit:function(e){e.preventDefault();var a,c,r=Tt({nuevaCuenta:v.nuevaCuenta});r.ok?(n((a=v,function(){var e=Object(p.a)(m.a.mark((function e(t,n){var c,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=n().auth.uid,delete(r=Object(le.a)(Object(le.a)({},a),{},{nombre:a.nuevaCuenta})).id,delete r.cantidad,delete r.nuevaCuenta,console.log(r),e.next=9,Object(O.g)(Object(O.d)(C,"".concat(c,"/app/cuentas/").concat(a.id)),r);case 9:t(_e(Object(le.a)(Object(le.a)({},r),{},{id:a.id}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,a){return e.apply(this,arguments)}}())),n((c=v,function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().auth.uid,e.next=3,Object(O.e)(Object(O.b)(C,"".concat(n,"/app/movimientos")));case 3:e.sent.forEach((function(e){var a,n;e.data().cuenta===c.nombre&&t(ze(Object(le.a)(Object(le.a)({},e.data()),{},{id:e.id,cuenta:c.nuevaCuenta}))),(null===(a=e.data().from)||void 0===a?void 0:a.cuenta)===c.nombre&&t(ze(Object(le.a)(Object(le.a)({},e.data()),{},{id:e.id,from:Object(le.a)(Object(le.a)({},e.from),{},{cuenta:c.nuevaCuenta})}))),(null===(n=e.data().to)||void 0===n?void 0:n.cuenta)===c.nombre&&t(ze(Object(le.a)(Object(le.a)({},e.data()),{},{id:e.id,to:Object(le.a)(Object(le.a)({},e.to),{},{cuenta:c.nuevaCuenta})})))}));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())),h.a.fire("Nombre actualizado a "+v.nuevaCuenta,"Cuenta actualizada correctamente","success"),t(e)):l(r.msg)},children:[Object(Je.jsxs)("div",{className:"form-container",children:[Object(Je.jsx)("h1",{children:"Editar Cuenta"}),u&&Object(Je.jsx)("div",{className:"msg-error",children:u}),Object(Je.jsxs)("section",{className:"modal__section",children:[Object(Je.jsx)("label",{htmlFor:"cuentaActual",children:"Nombre actual cuenta: "}),Object(Je.jsx)("h4",{children:d.nombre})]}),Object(Je.jsxs)("section",{className:"modal__section",children:[Object(Je.jsx)("label",{htmlFor:"nuevaCuenta",children:"Nueva cuenta: "}),Object(Je.jsx)("input",{value:v.nuevaCuenta,onChange:function(e){f(Object(le.a)(Object(le.a)({},v),{},Object(Ye.a)({},e.target.name,e.target.value)))},type:"text",name:"nuevaCuenta",placeholder:"Nuevo nombre"})]})]}),Object(Je.jsxs)("div",{className:"botones",children:[Object(Je.jsx)("button",{className:" btn boton-submit",type:"submit",children:"Editar"}),Object(Je.jsx)("button",{onClick:t,className:"btn btn-secondary boton-cancel",children:"Cancelar"}),0===a&&Object(Je.jsx)("button",{onClick:function(e){var c;(e.preventDefault(),0===a)&&(window.confirm("\xbfEstas seguro que deseas eliminar la cuenta ".concat(d.nombre," ?"))&&n((c=d.id,function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a().auth.uid,e.next=4,Object(O.c)(Object(O.d)(C,"".concat(n,"/app/cuentas/").concat(c)));case 4:t(we(c)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}())));t(e),h.a.fire("Cuenta eliminada","La cuenta ".concat(d.nombre," ha sido borrada exitosamente"),"success")},className:"btn btn-danger boton-eliminar",children:"Eliminar"})]})]})})},oa=function(e){var t,a=e.handleClose,n=e.nombreSubcuenta,c=e.nombreCuenta,i=e.cantidad,u=Object(r.b)(),l=Object(r.c)((function(e){return e.cuentas})).cuentas,d=Object(s.useState)(!1),b=Object(o.a)(d,2),j=b[0],v=b[1],f=Object(s.useState)({id:null===(t=l.find((function(e){return e.nombre===c})))||void 0===t?void 0:t.id,cuentaActual:c,subcuentaActual:n,nuevaSubcuenta:""}),x=Object(o.a)(f,2),g=x[0],N=x[1];return Object(Je.jsx)(Je.Fragment,{children:Object(Je.jsxs)("form",{className:"editar-cuenta",onSubmit:function(e){e.preventDefault();var t,r=Tt({nuevaCuenta:g.nuevaSubcuenta});r.ok?(u((t=Object(le.a)(Object(le.a)({},g),{},{subcuentas:Object(Et.a)(l.find((function(e){return e.nombre===c})).subcuentas.filter((function(e){return e!==n&&e})))}),function(){var e=Object(p.a)(m.a.mark((function e(a,n){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=n().auth.uid,t.subcuentas.push(t.nuevaSubcuenta),e.next=5,Object(O.g)(Object(O.d)(C,"".concat(c,"/app/cuentas/").concat(t.id)),{nombre:t.cuentaActual,subcuentas:t.subcuentas});case 5:a(ke(t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}())),u(function(e){return function(){var t=Object(p.a)(m.a.mark((function t(a,n){var c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n().auth.uid,t.next=3,Object(O.e)(Object(O.b)(C,"".concat(c,"/app/movimientos")));case 3:t.sent.forEach((function(t){var n,c,r,o;t.data().categoria===e.subcuentaActual&&a(ze(Object(le.a)(Object(le.a)({},t.data()),{},{id:t.id,categoria:e.nuevaSubcuenta}))),(t.data().cuenta===e.cuentaActual||(null===(n=t.data().from)||void 0===n?void 0:n.cuenta)===e.cuentaActual||(null===(c=t.data().to)||void 0===c?void 0:c.cuenta)===e.cuentaActual)&&(t.data().subcuenta===e.subcuentaActual&&a(ze(Object(le.a)(Object(le.a)({},t.data()),{},{id:t.id,subcuenta:e.nuevaSubcuenta}))),(null===(r=t.data().from)||void 0===r?void 0:r.subcuenta)===e.subcuentaActual&&a(ze(Object(le.a)(Object(le.a)({},t.data()),{},{id:t.id,from:Object(le.a)(Object(le.a)({},t.data().from),{},{subcuenta:e.nuevaSubcuenta})}))),(null===(o=t.data().to)||void 0===o?void 0:o.subcuenta)===e.subcuentaActual&&a(ze(Object(le.a)(Object(le.a)({},t.data()),{},{id:t.id,to:Object(le.a)(Object(le.a)({},t.data().to),{},{subcuenta:e.nuevaSubcuenta})}))))}));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}(g)),h.a.fire("Nombre actualizado a "+g.nuevaSubcuenta,"Cuenta actualizada correctamente","success"),a(e)):v(r.msg)},children:[Object(Je.jsxs)("div",{className:"form-container",children:[Object(Je.jsx)("h1",{children:"Editar Subcuenta"}),j&&Object(Je.jsx)("div",{className:"msg-error",children:j}),Object(Je.jsxs)("section",{className:"modal__section",children:[Object(Je.jsx)("label",{htmlFor:"cuentaActual",children:"Nombre actual cuenta: "}),Object(Je.jsx)("h4",{children:c})]}),Object(Je.jsxs)("section",{className:"modal__section",children:[Object(Je.jsx)("label",{htmlFor:"subcuentaActual",children:"Nombre actual subcuenta: "}),Object(Je.jsx)("h4",{children:n})]}),Object(Je.jsxs)("section",{className:"modal__section",children:[Object(Je.jsx)("label",{htmlFor:"nuevaSubcuenta",children:"Nueva nombre: "}),Object(Je.jsx)("input",{value:g.nuevaSubcuenta,onChange:function(e){e.preventDefault(),N(Object(le.a)(Object(le.a)({},g),{},Object(Ye.a)({},e.target.name,e.target.value)))},type:"text",name:"nuevaSubcuenta",placeholder:"Nuevo nombre"})]})]}),Object(Je.jsxs)("div",{className:"botones",children:[Object(Je.jsx)("button",{className:" btn boton-submit",type:"submit",children:"Editar"}),Object(Je.jsx)("button",{onClick:a,className:"btn btn-secondary boton-cancel",children:"Cancelar"}),0===i&&Object(Je.jsx)("button",{onClick:function(e){var t;(e.preventDefault(),0===i)&&(window.confirm("\xbfEstas seguro que deseas eliminar la subcuenta ".concat(g.subcuentaActual," ?"))&&(u((t=Object(le.a)(Object(le.a)({},g),{},{subcuentas:Object(Et.a)(l.find((function(e){return e.nombre===c})).subcuentas.filter((function(e){return e!==n&&e})))}),console.log(t),function(){var e=Object(p.a)(m.a.mark((function e(a,n){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=n().auth.uid,e.next=4,Object(O.g)(Object(O.d)(C,"".concat(c,"/app/cuentas/").concat(t.id)),{nombre:t.cuentaActual,subcuentas:t.subcuentas});case 4:a(Fe(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}())),h.a.fire("Cuenta eliminada","La subcuenta ".concat(g.subcuentaActual," ha sido borrada exitosamente"),"success")));a(e)},className:"btn btn-danger boton-eliminar",children:"Eliminar"})]})]})})},sa=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.modals})),a=t.isOpen,n=t.typeModal,c=t.modo,o=Object(r.c)((function(e){return e.cats})).activeCat,s=Object(r.c)((function(e){return e.cuentas})).activeCuenta,i=function(t){t.preventDefault(),e({type:U}),e({type:A}),e({type:ce}),e({type:Y})};return Object(Je.jsxs)(Je.Fragment,{children:[Object(Je.jsx)("div",{className:"modal__background animate__animated animate__fadeIn animate__faster",onClick:i}),Object(Je.jsxs)("div",{className:"modal__modal",children:[Object(Je.jsx)("i",{onClick:i,className:"bi bi-x-lg"}),a&&"gasto"===n&&Object(Je.jsx)(qt,{handleClose:i,modo:c}),a&&"ingreso"===n&&Object(Je.jsx)(Xt,{handleClose:i,modo:c}),a&&"transferencia"===n&&Object(Je.jsx)(na,{handleClose:i,modo:c,typeModal:n}),a&&"deuda"===n&&Object(Je.jsx)(zt,{handleClose:i,modo:c}),(a&&"prestamo"===n||a&&"deudaACobrar"===n)&&Object(Je.jsx)(Kt,{handleClose:i,modo:c,typeModal:n}),a&&"saldar deuda"===n&&Object(Je.jsx)(Gt,{handleClose:i}),a&&"saldar prestamo"===n&&Object(Je.jsx)(Bt,{handleClose:i}),a&&"editar categorias"===n&&Object(Je.jsx)(ca,{handleClose:i,activeCat:o}),a&&"editar cuentas"===n&&Object(Je.jsx)(ra,{handleClose:i,nombreCuenta:s.nomCuenta,cantidad:s.cantidad}),a&&"editar subcuentas"===n&&Object(Je.jsx)(oa,{handleClose:i,nombreSubcuenta:s.nomSubcuenta,nombreCuenta:s.nomCuenta,cantidad:s.cantidad}),a&&"compraActivos"===n&&Object(Je.jsx)(na,{handleClose:i,modo:c,typeModal:n}),a&&"ventaActivos"===n&&Object(Je.jsx)(na,{handleClose:i,modo:c,typeModal:n})]})]})},ia=function(e){var t=e.children,a=Object(r.c)((function(e){return e.modals})).isOpen,n=Object(r.c)((function(e){return e.auth})).uid;return Object(Je.jsxs)("div",{children:[a&&Object(Je.jsx)(sa,{}),n?t:Object(Je.jsx)(l.a,{to:"/login"})]})},ua=function(e){var t=e.children;return Object(r.c)((function(e){return e.auth})).uid?Object(Je.jsx)(l.a,{to:"/"}):t},la=function(){return Object(Je.jsx)("div",{className:"loading__screen",children:Object(Je.jsxs)("h3",{children:["Cargando ",Object(Je.jsx)("span",{children:"... "})]})})},da=function(){var e=Object(r.b)(),t=Object(s.useState)(!0),a=Object(o.a)(t,2),n=a[0],c=a[1];return Object(s.useEffect)((function(){var t=Object(i.c)();Object(i.d)(t,(function(t){(null===t||void 0===t?void 0:t.uid)&&(e(Qe(t.uid,t.displayName)),e(function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a().auth.uid,t($e()),e.next=4,Ee(n);case 4:c=e.sent,t(qe()),t(Re(c));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),e(function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a().auth.uid,e.next=4,de(n);case 4:0===(c=e.sent).length?(t(function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=a().auth.uid,be.forEach(function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)(Object(O.b)(C,"".concat(n,"/app/categorias")),t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),t(je(be))):t(je(c)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}()),e(function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a().auth.uid,e.next=4,fe(n);case 4:0===(c=e.sent).length?(t(function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=a().auth.uid,xe.forEach(function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)(Object(O.b)(C,"".concat(n,"/app/cuentas")),t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),t(ge(xe))):t(ge(c)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}())),c(!1)}))}),[e]),n?Object(Je.jsx)(la,{}):Object(Je.jsx)(u.a,{children:Object(Je.jsxs)(l.d,{children:[Object(Je.jsx)(l.b,{path:"/*",element:Object(Je.jsx)(ia,{children:Object(Je.jsx)(Ft,{})})}),Object(Je.jsx)(l.b,{path:"/login/*",element:Object(Je.jsx)(ua,{children:Object(Je.jsx)(et,{})})})]})})},ba=a(44),ja=a(84),ma={categorias:[],isEditing:!1,activeCat:null},pa={cuentas:[],isEditing:!1,activeCuenta:null},va={isOpen:!1,typeModal:null,modo:""},ha={activeMov:null,movs:[],loadingMovs:!1},Oa={uid:null,name:null},fa={pares:[{nombre:"USD/ARS",valor:1},{nombre:"BTC/ARS",valor:1},{nombre:"BTC/USD",valor:1}]},xa="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ba.c,ga=Object(ba.b)({movs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ha,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(le.a)(Object(le.a)({},e),{},{movs:t.payload});case y:case S:case _:return Object(le.a)(Object(le.a)({},e),{},{movs:[t.payload].concat(Object(Et.a)(e.movs))});case k:return Object(le.a)(Object(le.a)({},e),{},{activeMov:Object(le.a)({},t.payload)});case A:return Object(le.a)(Object(le.a)({},e),{},{activeMov:null});case w:return Object(le.a)(Object(le.a)({},e),{},{movs:e.movs.map((function(e){return e.id!==t.payload.id?e:t.payload}))});case F:return Object(le.a)(Object(le.a)({},e),{},{movs:e.movs.filter((function(e){return e.id!==t.payload&&e}))});case P:case E:return Object(le.a)(Object(le.a)({},e),{},{movs:[t.payload].concat(Object(Et.a)(e.movs))});case D:return Object(le.a)(Object(le.a)({},e),{},{movs:e.movs.map((function(e){return e.categoria===t.payload.categoriaActual?Object(le.a)(Object(le.a)({},e),{},{categoria:t.payload.nuevaCategoria,sector:t.payload.sector}):e}))});case I:return Object(le.a)(Object(le.a)({},e),{},{movs:[],activeMov:null});case T:return Object(le.a)(Object(le.a)({},e),{},{loadingMovs:!0});case L:return Object(le.a)(Object(le.a)({},e),{},{loadingMovs:!1});default:return e}},modals:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:va,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object(le.a)(Object(le.a)({},e),{},{isOpen:!0,typeModal:t.payload.tipo,modo:t.payload.modo,title:t.payload.title});case U:return Object(le.a)(Object(le.a)({},e),{},{isOpen:!1,typeModal:null,modo:"",title:null});default:return e}},cats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return Object(le.a)(Object(le.a)({},e),{},{categorias:t.payload});case K:return Object(le.a)(Object(le.a)({},e),{},{categorias:[].concat(Object(Et.a)(e.categorias),[t.payload])});case ee:return Object(le.a)(Object(le.a)({},e),{},{categorias:e.categorias.map((function(e){return e.id===t.payload.id?t.payload:e}))});case te:return Object(le.a)(Object(le.a)({},e),{},{isEditing:!0});case ae:return Object(le.a)(Object(le.a)({},e),{},{isEditing:!1});case W:return Object(le.a)(Object(le.a)({},e),{},{categorias:e.categorias.filter((function(e){return e.id!==t.payload.id&&e}))});case ne:return Object(le.a)(Object(le.a)({},e),{},{activeCat:t.payload});case ce:return Object(le.a)(Object(le.a)({},e),{},{activeCat:null});case re:return Object(le.a)(Object(le.a)({},e),{},{categorias:[],isEditing:!1,activeCat:null});default:return e}},cuentas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return Object(le.a)(Object(le.a)({},e),{},{cuentas:t.payload});case R:return Object(le.a)(Object(le.a)({},e),{},{cuentas:[].concat(Object(Et.a)(e.cuentas),[t.payload])});case B:return Object(le.a)(Object(le.a)({},e),{},{cuentas:e.cuentas.map((function(e){return e.nombre===t.payload.nombre?t.payload:e}))});case G:return console.log(t.payload),Object(le.a)(Object(le.a)({},e),{},{cuentas:e.cuentas.map((function(e){return e.id===t.payload.id?t.payload:e}))});case $:return Object(le.a)(Object(le.a)({},e),{},{cuentas:e.cuentas.map((function(e){return e.nombre!==t.payload.cuentaActual?e:Object(le.a)(Object(le.a)({},e),{},{subcuentas:e.subcuentas.map((function(e){return e===t.payload.subcuentaActual?t.payload.nuevaSubcuenta:e}))})}))});case q:return Object(le.a)(Object(le.a)({},e),{},{isEditing:!0});case Q:return Object(le.a)(Object(le.a)({},e),{},{isEditing:!1});case z:return Object(le.a)(Object(le.a)({},e),{},{cuentas:e.cuentas.filter((function(e){return e.id!==t.payload&&e}))});case H:return Object(le.a)(Object(le.a)({},e),{},{cuentas:e.cuentas.map((function(e){return e.nombre!==t.payload.cuentaActual?e:Object(le.a)(Object(le.a)({},e),{},{subcuentas:t.payload.subcuentas})}))});case X:return Object(le.a)(Object(le.a)({},e),{},{activeCuenta:t.payload});case Y:return Object(le.a)(Object(le.a)({},e),{},{activeCuenta:null});case Z:return Object(le.a)(Object(le.a)({},e),{},{cuentas:[],isEditing:!1,activeCuenta:null});default:return e}},pares:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fa,t=arguments.length>1?arguments[1]:void 0;return t.type===se?Object(le.a)(Object(le.a)({},e),{},{pares:t.payload}):e},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ie:return Object(le.a)(Object(le.a)({},e),{},{uid:t.payload.uid,name:t.payload.userName});case ue:return Object(le.a)(Object(le.a)({},e),{},{uid:null,name:null});default:return e}}}),Ca=Object(ba.d)(ga,xa(Object(ba.a)(ja.a)));var Na=function(){return Object(Je.jsx)(r.a,{store:Ca,children:Object(Je.jsx)(da,{})})};a(209);c.a.render(Object(Je.jsx)(Na,{}),document.getElementById("root"))}},[[210,1,2]]]);
//# sourceMappingURL=main.7986843d.chunk.js.map